function defclass(prototype){var constructor=prototype.hasOwnProperty('constructor')?prototype.constructor:function(){prototype.constructor.apply(this,arguments);};constructor.prototype=prototype;return constructor;}
function extend(constructor,keys){var prototype=Object.create(constructor.prototype);for(var key in keys){prototype[key]=keys[key];}
prototype.super=constructor.prototype;return defclass(prototype);}
var AufBid=window.AufBid||{};AufBid.AufAdapter=(function(){var SKIN_MIN_HEIGHT=1000;var SKIN_MIN_WIDTH=1000;var SKIN_OFFSET=220;return defclass({debug:false,bidTTL:60,constructor:function(manager,params){this.manager=manager;this.options=params||{};this.name=params.name;this.bidder=params.bidder;this.currency=params.currency.toUpperCase();this.callbacks={};this.placements={};this.options.gdpr={applies:0,consentString:'BOP6h6lOQDfw_AKABAFRBC-AAAAcR7_______9______9uz_Gv_r_f__33e8_39v_h_7_-___m_-3zV4-_1vV11yPg1urfIr1NpjQ6OGgA'};this.log('Initialize bidder');if(this.debug&&location.host.indexOf('local')<0){this.logError('Adapter in debug mode in production');this.debug=false;}
if(this.manager.getConfig('hb_debug')){this.debug=true;}
if(this.debug){this.log('Adapter in debug mode','warn');}},log:function(message,logType){this.manager.logger.logConsole('['+this.name+'] '+message,logType);},logError:function(message,consoleOnly){if(this.manager.adblock){return;}
this.manager.logger.logError(message,'account '+this.name,consoleOnly);},disable:function(){this.disabled=true;this.logError('SDK not loaded');},requestBids:function(){throw'adapter.requestBids() function not implemented yet';},getBidsFromResponse:function(){throw'adapter.getBidsFromResponse() function not implemented yet';},getNativeHTML:function(native){if(!window.AufAds||!AufAds.Native){this.logError('Failed creating native ad - native template not available');return;}
var nativeAd=new AufAds.Native(native);return nativeAd?nativeAd.getHTML():'';},render:function(bid){if(!bid.creativeHTML&&!bid.creativeURL){this.logError('Failed rendering - bid without src or HTML');return;}
if(bid.trackingPixels){var trackingPixelError=false;bid.trackingPixels.forEach(function(trackingPixel){if(!this.manager.utils.loadPixel(trackingPixel)){this.logError('Failed calling tracking pixel');trackingPixelError=true;}},this);if(trackingPixelError){return;}}
if(bid.nativeAd){return this.renderNative(bid);}else if(bid.placementWidth>=SKIN_MIN_WIDTH&&bid.placementHeight>=SKIN_MIN_HEIGHT){return this.renderSkin(bid);}else{return this.renderCreative(bid);}},renderNative:function(bid){var container=document.getElementById(bid.containerId);if(!container){this.logError('Failed rendering - container not available - '+bid.containerId);return;}
container.className='af-hb-native';container.style.clear='both';container.style.position='relative';container.innerHTML=bid.creativeHTML;return container;},renderSkin:function(bid){return afAd.renderSkin({creativeWidth:bid.placementWidth,creativeHeight:bid.placementHeight,contentVerticalOffset:SKIN_OFFSET,isHTML5:true,creativeHTML:(bid.creativeHTML||''),creativeURL:(bid.creativeURL||''),oldWayRendering:bid.oldWayRendering});},renderCreative:function(bid){var doc=bid.renderParams?bid.renderParams.document:null;if(doc&&bid.creativeHTML){return this.addCreativeToDocument(doc,bid.creativeHTML);}else{var iframe=this.manager.utils.createIframe(bid.placementWidth,bid.placementHeight);if(!iframe){this.logError('Failed rendering - error in creating iframe');return;}
if(doc){this.addCreativeToDocument(doc,iframe,true);}else{var container=document.getElementById(bid.containerId);if(!container){this.logError('Failed rendering - container not available - '+bid.containerId);return;}
container.appendChild(iframe);}
if(bid.creativeHTML){try{var iframeDoc=iframe.contentDocument||iframe.contentWindow.document;iframeDoc.open();iframeDoc.write(bid.creativeHTML);iframeDoc.close();}catch(e){this.logError('Failed rendering creative into iframe '+e.message);return;}}else if(bid.creativeURL){iframe.src=bid.creativeURL;}
return iframe;}},addCreativeToDocument:function(doc,html,isIframe){try{doc.open();doc.write('<div id="ad-container">'+(isIframe?'':html)+'</div>');doc.close();if(isIframe){var container=doc.getElementById('ad-container');container.appendChild(html);}
return doc;}catch(e){this.logError('Failed rendering creative into document '+e.message);return;}},hasPlacements:function(){return Object.keys(this.placements).length>0;},setPlacements:function(formatIds){this.placements=this.getActivePlacements(this.options.placements,formatIds);},getActivePlacements:function(placements,formatIds){var activePlacements={};formatIds.forEach(function(formatId){if(placements[formatId]){activePlacements[formatId]=placements[formatId];}});return activePlacements;},createCallback:function(formatId,placementId,size){var fnName='callback_'+this.name
+'_n'+this.manager.callId
+(formatId?'_f'+formatId:'')
+(placementId?'_p'+placementId:'')
+(size?'_s'+size:'');fnName=fnName.replace(/[-, ]+/gi,'_');var that=this;this.callbacks[fnName]=function(response){that.log('Get bids from response - '
+(formatId?'format '+formatId:'all formats')
+' - '
+(placementId?'placement '+placementId
+(size?' ('+size+')':''):'all placements'));that.getBidsFromResponse(response,formatId,placementId,size);that.callbacks[fnName]=function(){that.logError('Callback already called '+fnName);};};return{name:'aufbidjs.accounts.'+this.name+'.callbacks.'+fnName,func:this.callbacks[fnName]};}});})();
var AufBid=window.AufBid||{};AufBid.Logger=(function(){var KEY='HB';var LOGMATIC_KEYS={'HEADER_BIDDING_RENDER':'z0H3qFj-QFu2cRbMgZTRUw',};var SAMPLE_RATE_ERRORS=0;var SAMPLE_RATE_BIDS=100;var SAMPLE_RATE_RENDERED=100;var SAMPLE_RATE_BOOKED=100;var logger=function(){this.logger=window.afLogger;this.logger.logmaticInitKeys(LOGMATIC_KEYS);this.setVerbose();};logger.prototype={constructor:logger,setVerbose:function(enabled){this.logger.setVerbose(KEY,enabled);},logConsole:function(log,logType){this.logger.logConsole(log,logType,KEY);},logError:function(message,category,consoleOnly){if(SAMPLE_RATE_ERRORS&&Math.floor(Math.random()*100)>SAMPLE_RATE_ERRORS){return;}
var adserverInfos=window.afAd?('[v'+afAd.version+'] adserver '+afAd.name):'no adserver';category=adserverInfos+(category?' - '+category:'');this.logger.logError(message,KEY+(category?':'+category:''),consoleOnly);},logAnalytics:function(logType,logs){this.logger.logAnalytics(logType,logs,true);},logRenderedBid:function(bid,applySample){if(applySample&&SAMPLE_RATE_RENDERED&&Math.floor(Math.random()*100)>SAMPLE_RATE_RENDERED){return;}
this.logAnalytics('HEADER_BIDDING_RENDER',{headerBidding:this.getBidData(bid)});},logBookedBids:function(bookedBids,applySample){var bookedBidsLogs=[];bookedBids.forEach(function(bid){if(applySample&&SAMPLE_RATE_BOOKED&&Math.floor(Math.random()*100)>SAMPLE_RATE_BOOKED){return;}
bookedBidsLogs.push({headerBidding:this.getBidData(bid)});},this);this.logAnalytics('HEADER_BIDDING_BOOKED',bookedBidsLogs);},logAvailableBids:function(bidsBuckets,applySample){var bidsLog=[];for(var bidder in bidsBuckets){if(bidsBuckets.hasOwnProperty(bidder)){for(var formatId in bidsBuckets[bidder]){if(bidsBuckets[bidder].hasOwnProperty(formatId)){bidsBuckets[bidder][formatId].forEach(function(bid){if(!bid||bid.logged)return;bid.logged=true;if(applySample&&SAMPLE_RATE_BIDS&&Math.floor(Math.random()*100)>SAMPLE_RATE_BIDS){return;}
bidsLog.push({headerBidding:this.getBidData(bid)});},this);}}}}
this.logAnalytics('HEADER_BIDDING',bidsLog);},getBidData:function(bid){var bidData={id:bid.id,booked:bid.booked,rendered:bid.rendered,account:bid.accountName,bidder:bid.bidderName,format:bid.formatName,placement:bid.placementId,size:bid.placementSize,currency:bid.currency,late:bid.late,expired:bid.expired,cpm:bid.cpmNetEuros,cpmAdjusted:bid.cpmAdjusted,cpmRaw:bid.cpmRaw};if(window.afAd){bidData.adserver=afAd.name;}
return bidData;}};return logger;})();
(function(root,factory){'use strict';if(root.PubSub)return;var PubSub={};root.PubSub=PubSub;var define=root.define;factory(PubSub);if(typeof define==='function'&&define.amd){define(function(){return PubSub;});}else if(typeof exports==='object'){if(module!==undefined&&module.exports){exports=module.exports=PubSub;}
exports.PubSub=PubSub;module.exports=exports=PubSub;}}((typeof window==='object'&&window)||this,function(PubSub){'use strict';var messages={},lastUid=-1;function hasKeys(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return true;}}
return false;}
function throwException(ex){return function reThrowException(){throw ex;};}
function callSubscriberWithDelayedExceptions(subscriber,message,data){try{subscriber(message,data);}catch(ex){setTimeout(throwException(ex),0);}}
function callSubscriberWithImmediateExceptions(subscriber,message,data){subscriber(message,data);}
function deliverMessage(originalMessage,matchedMessage,data,immediateExceptions){var subscribers=messages[matchedMessage],callSubscriber=immediateExceptions?callSubscriberWithImmediateExceptions:callSubscriberWithDelayedExceptions,s;if(!messages.hasOwnProperty(matchedMessage)){return;}
for(s in subscribers){if(subscribers.hasOwnProperty(s)){callSubscriber(subscribers[s],originalMessage,data);}}}
function createDeliveryFunction(message,data,immediateExceptions){return function deliverNamespaced(){var topic=String(message),position=topic.lastIndexOf('.');deliverMessage(message,message,data,immediateExceptions);while(position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');deliverMessage(message,topic,data,immediateExceptions);}};}
function messageHasSubscribers(message){var topic=String(message),found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic])),position=topic.lastIndexOf('.');while(!found&&position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic]));}
return found;}
function publish(message,data,sync,immediateExceptions){var deliver=createDeliveryFunction(message,data,immediateExceptions),hasSubscribers=messageHasSubscribers(message);if(!hasSubscribers){return false;}
if(sync===true){deliver();}else{setTimeout(deliver,0);}
return true;}
PubSub.publish=function(message,data){return publish(message,data,false,PubSub.immediateExceptions);};PubSub.publishSync=function(message,data){return publish(message,data,true,PubSub.immediateExceptions);};PubSub.subscribe=function(message,func){if(typeof func!=='function'){return false;}
if(!messages.hasOwnProperty(message)){messages[message]={};}
var token='uid_'+String(++lastUid);messages[message][token]=func;return token;};PubSub.subscribeOnce=function(message,func){var token=PubSub.subscribe(message,function(){PubSub.unsubscribe(token);func.apply(this,arguments);});return PubSub;};PubSub.clearAllSubscriptions=function clearAllSubscriptions(){messages={};};PubSub.clearSubscriptions=function clearSubscriptions(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){delete messages[m];}}};PubSub.unsubscribe=function(value){var descendantTopicExists=function(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){return true;}}
return false;},isTopic=typeof value==='string'&&(messages.hasOwnProperty(value)||descendantTopicExists(value)),isToken=!isTopic&&typeof value==='string',isFunction=typeof value==='function',result=false,m,message,t;if(isTopic){PubSub.clearSubscriptions(value);return;}
for(m in messages){if(messages.hasOwnProperty(m)){message=messages[m];if(isToken&&message[value]){delete message[value];result=value;break;}
if(isFunction){for(t in message){if(message.hasOwnProperty(t)&&message[t]===value){delete message[t];result=true;}}}}}
return result;};}));
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){var b={};b.MODE={IMMEDIATE:0,LINGER:1,ERROR:2};var c=500,d=3e4,e=null,f=b.MODE.LINGER,g=0,h=a;return b.reset=function(){b.isScheduled()&&clearTimeout(e),e=null},b.isScheduled=function(){return null!==e},b.setMode=function(a){f=a,f!==b.MODE.ERROR&&(g=0)},b.postpone=function(a){var i;switch(b.reset(),f){case b.MODE.IMMEDIATE:i=0;break;case b.MODE.LINGER:i=h;break;case b.MODE.ERROR:var j=c*Math.pow(2,g);g++,i=Math.min(j,d)}e=setTimeout(a,i)},b}function c(a){a&&(j=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;j&&(a={},a[j]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");t(b,a),d.apply?d.apply(console,arguments):d(b)}})}function d(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,j&&(c[j]="error"),t(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},j&&(g[j]="error"),t(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var e,f,g,h,i="https://api.logmatic.io/v1/input/",j="severity",k=500,l=10,m=-1,n=[],o=204800,p=b(k),q=function(a){i+=a},r=function(a){i=a},s=function(a){a=a||{},null!=a.lingerMs&&a.lingerMs>=0&&(k=a.lingerMs),null!=a.maxPostCount&&(a.maxPostCount<1&&(a.maxPostCount=1),l=a.maxPostCount),null!=a.maxWaitingCount&&(m=a.maxWaitingCount),null!=a.maxContentSize&&(o=a.maxContentSize)},t=function(b,c){if(i){var d={message:b};j&&(d[j]="info"),a(c,d),u(d)}},u=function(b){a(e,b),h&&(b[h]=window.location.href),n=n||[],n.push(JSON.stringify(b)),m>=0&&n.length>m&&n.shift(),v()},v=function(){p.isScheduled()||p.postpone(w)},w=function(){function b(a){200===a||0===a?n.length>0?p.setMode(p.MODE.IMMEDIATE):p.setMode(p.MODE.LINGER):p.setMode(p.MODE.ERROR),p.reset(),0!==n.length&&v()}for(var c=[],d=0;n.length>0&&c.length<l;){var j=n.shift();if(d+=j.length,d>o){if(j.length>o){var k={severity:"warn",message:"Message dropped as its size exceeded the hard limit of 200 kBytes"};a(e,k),JSON.stringify(k).length>o&&(k={severity:"error",message:"Message dropped because the context size provided exceeded the hard limit of 200 kBytes"}),k[h]=window.location.href,j=JSON.stringify(k)}n.unshift(j);break}c.push(j)}if(0===c.length)return void b(0);var m,q="["+c.join(",")+"]";m="undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest,m.open("POST",i,!0),"undefined"==typeof XDomainRequest&&(m.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&m.setRequestHeader("X-Logmatic-Add-IP",f),g&&m.setRequestHeader("X-Logmatic-Add-UserAgent",g)),m.onerror=function(a){b(a.target.status)},m.onload=function(a){b(a.target.status)},m.send(q)},x=function(a){e=a},y=function(a){h=a},z=function(a){f=a},A=function(a){g=a};return{init:q,log:t,forceEndpoint:r,setMetas:x,setSendErrors:d,setSendConsoleErrors:d,setSendConsoleLogs:c,setIPTracking:z,setUserAgentTracking:A,setURLTracking:y,setBulkOptions:s}});
function af_logError(message,category,domain){af_logError.img=new Image();af_logError.img.src=(domain?'//'+domain:'')
+'/world/js_errpix.asp'
+'?d='+encodeURIComponent(message)
+'&t='+Math.round(Math.random()*99999)
+(category?'&c='+category:'');}
function af_getHashParams(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}
function af_isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}
function af_getCookie(name){var i,x,y;var cookiesTab=document.cookie.split(';');for(i=0;i<cookiesTab.length;i++){x=cookiesTab[i].substr(0,cookiesTab[i].indexOf('='));y=cookiesTab[i].substr(cookiesTab[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x=='afperso'||x=='afpperso'){var j,a,cookiesValuesTab=y.split('&');for(j=0;j<cookiesValuesTab.length;j++){a=cookiesValuesTab[j].substr(0,cookiesValuesTab[j].indexOf('='));if(a==name){return unescape(cookiesValuesTab[j].substr(cookiesValuesTab[j].indexOf('=')+1));}}}else if(x==name){return y;}}
return'';}
function af_setCookie(name,value,minutes){minutes=minutes||15;var date=new Date();date.setTime(date.getTime()+minutes*60*1000);document.cookie=name+'='+encodeURIComponent(value)+'; expires='+date.toUTCString()+'; domain='+location.hostname.substr(location.hostname.indexOf('.'))+'; path=/';}
function af_setSessionCookie(name,value){af_setCookie(name,value,15);}
function af_setPermCookie(name,value){af_setCookie(name,value,365*24*60);}
function af_cleanCookie(name){af_setCookie(name,'',-1);}
function af_guid(){return Date.now()+''+Math.floor(Math.random()*1000);}
function af_bind(o,m){var args=[];for(var i=2;i<arguments.length;++i){args.push(arguments[i]);}
return function(){var tmp=args.slice(0,args.length);for(var i=0;i<arguments.length;++i){tmp.push(arguments[i]);}
return m.apply(o,tmp);};}
function af_push(object,path,varName,value){var subpaths=path.split('.');if(subpaths.length>0){if(typeof object[subpaths[0]]=='undefined'){object[subpaths[0]]={};}
var context=object[subpaths[0]];for(i=1;i<subpaths.length;i++){if(typeof context[subpaths[i]]=='undefined'){context[subpaths[i]]={};}else{context=context[subpaths[i]];}}
context[varName]=value;}}
function af_clone(obj){if(obj===null||typeof obj!=='object'){return obj;}
var temp=obj.constructor();for(var key in obj){temp[key]=af_clone(obj[key]);}
return temp;}
function af_addEvent(elt,event,listener,capture){if(elt&&elt.addEventListener){elt.addEventListener(event,listener,capture);return true;}else if(elt&&elt.attachEvent){return elt.attachEvent('on'+event,listener);}else if(elt){var oldListener=elt['on'+event];elt['on'+event]=function(e){if(oldListener){oldListener(e);}
return listener(e);};return oldListener;}}
function af_windowSize(){var i=window,e=document.documentElement,b=document.body;var w=(i.innerWidth?i.innerWidth:(e&&e.clientWidth?e.clientWidth:(b&&b.clientWidth?b.clientWidth:0)));var h=(i.innerHeight?i.innerHeight:(e&&e.clientHeight?e.clientHeight:(b&&b.clientHeight?b.clientHeight:0)));var l=(i.pageXOffset?i.pageXOffset:(e&&e.scrollLeft?e.scrollLeft:(b&&b.scrollLeft?b.scrollLeft:0)));var t=(i.pageYOffset?i.pageYOffset:(e&&e.scrollTop?e.scrollTop:(b&&b.scrollTop?b.scrollTop:0)));return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_findPos(o){if(!o||o==document.body){return{l:0,t:0};}
var l=0,t=0,b=document.body,w=o.offsetWidth,h=o.offsetHeight;if(o.offsetParent){l=o.offsetLeft-o.scrollLeft;t=o.offsetTop-o.scrollTop;while(o=o.offsetParent){l+=o.offsetLeft-(o!=b?o.scrollLeft:0);t+=o.offsetTop-(o!=b?o.scrollTop:0);}}
return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
var af_cssUtils=(function(){var _has3d,_cssTransform;function _can3d(){if(typeof _has3d!=='undefined')return _has3d;if(!window.getComputedStyle){return false;}
var el=document.createElement('p'),has3d,transforms={'webkitTransform':'-webkit-transform','OTransform':'-o-transform','msTransform':'-ms-transform','MozTransform':'-moz-transform','transform':'transform'};document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}
document.body.removeChild(el);_has3d=(has3d!==undefined&&has3d.length>0&&has3d!=='none');return _has3d;}
function _getTransformProp(){if(typeof _cssTransform!=='undefined')return _cssTransform;var prefixes='transform webkitTransform mozTransform oTransform msTransform'.split(' '),i=0;while(_cssTransform===undefined){_cssTransform=document.createElement('div').style[prefixes[i]]!==undefined?prefixes[i]:undefined;i++;}
return _cssTransform;}
function translate(elt,tx,ty,tz,cb){if(!elt)return;var styleProp=_getTransformProp();if(styleProp){var styleValue;if(_can3d()){styleValue='translate3d('+tx+', '+ty+', '+tz+')';}else{styleValue='translate('+tx+', '+ty+')';}
window.requestAnimationFrame(function(){elt.style[styleProp]=styleValue;if(typeof cb==='function'){cb();}});}else{afLogger.logError('CSS transform functions not supported');return;}}
return{translate:translate};})();function af_percentInViewport(el){if(!el){return 0;}
var rect=el.getBoundingClientRect();var wSize=af_windowSize();var visibleHeight=rect.height;var visibleWidth=rect.width;var totalSize=visibleHeight*visibleWidth;if(rect.top<0&&rect.bottom>0){visibleHeight+=rect.top;}
if(rect.bottom>wSize.h&&rect.top<wSize.h){visibleHeight+=(wSize.h-rect.bottom);}
if((Math.max(rect.top,rect.bottom)<0)||(Math.min(rect.bottom,rect.top)>wSize.h)){visibleHeight=0;}
if(rect.left<0&&rect.right>0){visibleWidth+=rect.left;}
if(rect.right>wSize.w&&rect.left<wSize.w){visibleWidth+=(wSize.w-rect.right);}
if((Math.max(rect.left,rect.right)<0)||(Math.min(rect.left,rect.right)>wSize.w)){visibleWidth=0;}
return((visibleHeight*visibleWidth)/totalSize);}
function af_isInViewport(el,percent){if(!el){return false;}
if(typeof percent!=='number'){percent=1;}
return(af_percentInViewport(el)>=percent);}
var _isIOS;function af_isIOS(){if(typeof _isIOS==='undefined'){_isIOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)!==null;}
return _isIOS;}
function af_findAncestor(el,cls){while((el=el.parentElement)&&!el.classList.contains(cls));return el;}
var af_userAgent=(function(){var _isMobile=false;var _isTablet=false;var _regexMobile=/(ipod|blackberry|phone|mobile|opera mini|pda|symbian|3ds|nokia|ericsson|alcatel)/gi;var _regexTabletSmall=/(pad|lenovo|tab|GT-P5210|GT-P5110|Nexus 7|GT-N8010|GT-P3110)/gi;var _regexTablet=/(pad|tab|android)/gi;var _initialized=false;function _init(){if(_initialized)return;_initialized=true;if(navigator.userAgent.match(_regexMobile)){if(navigator.userAgent.match(_regexTabletSmall)){_isTablet=true;}else{_isMobile=true;}}else if(navigator.userAgent.match(_regexTablet)){_isTablet=true;}}
function isMobile(){_init();return _isMobile;}
function isTablet(){_init();return _isTablet;}
return{isMobile:isMobile,isTablet:isTablet};})();function af_isMobile(){return af_userAgent.isMobile();}
function af_isTablet(){return af_userAgent.isTablet();}
function af_getDFPFormattedKeywords(keywords){var formattedKeywords='';var cleanedKeywords=keywords.replace(/^\W/,'').replace(/;/g,'&').replace(/&+/g,'&');cleanedKeywords.split('&').forEach(function(keyValue){var keyValueArr=keyValue.split('=');var key=keyValueArr[0];var value=keyValueArr[1];if(!key||typeof value==='undefined'){return;}
var keyQS='&'+key+'=';var keyQSPos=formattedKeywords.indexOf(keyQS);if(keyQSPos!==-1){var keyValues=formattedKeywords.substr(keyQSPos+keyQS.length);if(keyValues.indexOf('&')!==-1){keyValues=keyValues.substr(0,keyValues.indexOf('&'));}
if(keyValues.indexOf(value)!==-1){return;}
formattedKeywords=formattedKeywords.substr(0,keyQSPos+keyQS.length)+value+','+formattedKeywords.substr(keyQSPos+keyQS.length);}else{formattedKeywords+=keyQS+value;}});if(formattedKeywords.indexOf('&')===0){formattedKeywords=formattedKeywords.substr(1);}
return formattedKeywords;}
function af_refreshAds(formatIds,extraTarget,delay,pageId,forceMasterFlag,resetTimestamp,tagId){window.afLogger.logError('af_refreshAds should not be used','ads');if(window.afAd&&typeof afAd.refreshAds==='function'){return afAd.refreshAds({delay:delay,extraTarget:extraTarget,forceMasterFlag:forceMasterFlag,formatIds:formatIds,pageId:pageId,resetTimestamp:resetTimestamp,tagId:tagId});}}
function afAd_addKeyword(key,value){if(key&&!((key==='utm_source'||key==='utm_medium'||key==='utm_campaign')&&!value)){sas_target=afAd_cleanKeywords(';'+sas_target+';'+key+'='+value+';');}
return sas_target;}
function afAd_removeKeywords(key){if(key){var regex=new RegExp('(^|\;)'+key+'[^\;]*($|)','gi');sas_target=afAd_cleanKeywords(sas_target.replace(regex,';'));}
return sas_target;}
function afAd_updateKeyword(key,value){afAd_removeKeywords(key);afAd_addKeyword(key,value);return sas_target;}
function afAd_cleanKeywords(keywords){return keywords.replace(/;+/g,';');}
var Aflog=window.Aflog||{};Aflog.Logger=Aflog.Logger||(function(){var EXTERNAL_DOMAINS_REGEXP=/onmeda|netmums/i;var ERROR_SAMPLE_RATE=10;var LOGMATIC_SAMPLE_RATE=10;var LOGMATIC_ENDPOINT='https://api.logmatic.io/v1/input/';var LOGMATIC_KEYS={'PAGE_VISIT':'4K2CgF19Q-aJ2b0pNTV48g'};var BQ_SAMPLE_RATE=0;var BQ_ENDPOINT_PROD='https://us-central1-toolbox-198817.cloudfunctions.net/log';var BQ_ENDPOINT_LOCAL='https://us-central1-toolbox-198817.cloudfunctions.net/log_staging';var BQ_LOGS_MAXQUEUE=15;var BQ_LOGS_TIMEOUT=1500;var logger=function(options){this.initLogger(options);this.initLogs();};logger.prototype={constructor:logger,verbose:{},logmaticKeys:LOGMATIC_KEYS,bqLogs:{},bqTimer:null,initLogger:function(data){this.logmaticInit();this.datalayer=(data&&data.datalayer?data.datalayer:(window.af_dataLayer?af_dataLayer[0]:null));this.analyticsInit();},initLogs:function(){this.logs={logmatic:{},console:{}};},setVerbose:function(category,enabled){if(!category){this.logError('Failed activating verbose - missing category');return;}
var key=category.toLowerCase()+'_verbose';this.verbose[category]=(enabled||this.getConfig(key)!=false?'1':'0');localStorage.setItem(key,this.verbose[category]);},setDataLayer:function(datalayer){this.datalayer=datalayer;},logConsole:function(log,logType,category){if(!window.console){return;}
if(category&&this.getConfig(category.toLowerCase()+'_verbose')==false){return;}
logType=logType||'log';if(typeof log==='object'){logType='table';}else if(typeof log==='string'&&category){log='['+category+'] '+log;}
if(logType==='table'){console.table(log);}else if(logType==='count'){console.count(log);}else{console[logType].apply(console,[log]);}},logError:function(message,category,consoleOnly){this.logConsole((category?'['+category+'] ':'')+message,'error');if(consoleOnly||ERROR_SAMPLE_RATE&&Math.floor(Math.random()*100)>ERROR_SAMPLE_RATE){return;}
var hostnameArr=location.hostname.split('.');hostnameArr.shift();var cleanedHostname=hostnameArr.join('.');var domain=(EXTERNAL_DOMAINS_REGEXP.test(location.hostname)?'aufeminin.':'www.')+cleanedHostname;var img=new Image();img.src='https://'+domain+'/reloaded/errpix.php'
+'?s='+ERROR_SAMPLE_RATE
+'&d='+encodeURIComponent(message.split('').reverse().join(''))
+'&t='+Math.round(Math.random()*99999)
+(category?'&c='+encodeURIComponent(category):'');},logAnalytics:function(logType,logs,applySampling){if(!(logs instanceof Array)){logs=[logs];}
if(logs.length<1){return;}
var datalayer=this.getFilteredDatalayer();var sessionData=this.getSessionData();for(var i=0,l=logs.length;i<l;i++){logs[i].sessionData=sessionData;logs[i].datalayer=datalayer;logs[i].url=window.location.href;}
this.logmaticPost(logType,logs,applySampling);this.bqLog(logType,logs,applySampling);},getSessionData:function(){if(!window.afSession){this.logError('Failed retrieving session data');return;}
return{visitor:afSession.getVisitorId(),session:afSession.getSessionId(),pageview:afSession.getPageviewId(),wave:afSession.getWaveId(),rank:afSession.getRankId(),};},getFilteredDatalayer:function(){if(this.datalayer){return{userInfo:{du:this.datalayer.userInfo.du,device:this.datalayer.userInfo.device,adblocker:this.datalayer.userInfo.adblocker?true:false,screenResolution:this.datalayer.userInfo.screenResolution,segment:this.datalayer.userInfo.segment},pageInfo:{version:this.datalayer.pageInfo.version,contentType:this.datalayer.pageInfo.contentType,section:this.datalayer.pageInfo.section,subsection:this.datalayer.pageInfo.subsection,tag:this.datalayer.pageInfo.tag,category:this.datalayer.pageInfo.category,ads:this.datalayer.pageInfo.ads},campaignInfo:{utmSource:this.datalayer.campaignInfo.utmSource,utmCampaign:this.datalayer.campaignInfo.utmCampaign,utmMedium:this.datalayer.campaignInfo.utmMedium,paid:this.datalayer.campaignInfo.paid?true:false},siteInfo:{platform:this.datalayer.siteInfo.platform,isMobile:this.datalayer.siteInfo.isMobile},vuid:this.datalayer.userInfo.vuid};}else{return{siteInfo:{platform:document.domain}};}},analyticsInit:function(){if(!window.PubSub)return;var that=this;PubSub.subscribe('datalayer.ready',function(){that.analyticsLog();});PubSub.subscribe('tracking.call',function(){that.analyticsLog();});},analyticsLog:function(){if(!this.datalayer)return;this.logAnalytics('ANALYTICS',{},true,true);},logmaticInit:function(){logmatic.init();logmatic.setIPTracking('client.IP');logmatic.setUserAgentTracking('client.user-agent');logmatic.setBulkOptions({lingerMs:0,maxPostCount:1,maxWaitingCount:-1});},logmaticForceKey:function(logmaticKey){logmatic.forceEndpoint('https://api.logmatic.io/v1/input/'+logmaticKey);},logmaticInitKeys:function(keys){for(var message in keys){this.logmaticKeys[message]=keys[message];}},logmaticGetKey:function(logStackName){return this.logmaticKeys[logStackName];},logmaticLog:function(message,context){logmatic.log(message,context);},logmaticPost:function(message,logs,applySampling){if(applySampling&&LOGMATIC_SAMPLE_RATE&&Math.floor(Math.random()*100)>LOGMATIC_SAMPLE_RATE){return;}
var logmaticKey=this.logmaticGetKey(message);if(!logmaticKey||!logs)return;var url=LOGMATIC_ENDPOINT+logmaticKey;for(var i=0,l=logs.length;i<l;i++){logs[i].message=message;logs[i].severity='info';}
var headers=[{header:'Content-Type',value:'application/json; charset=UTF-8'},{header:'X-Logmatic-Add-IP',value:'client.IP'},{header:'X-Logmatic-Add-UserAgent',value:'client.user-agent'},];return this.sendRequest('POST',url,headers,logs);},bqLog:function(logType,logs,applySampling){return;if(applySampling&&typeof BQ_SAMPLE_RATE!=='undefined'&&Math.floor(Math.random()*100)>BQ_SAMPLE_RATE){return;}
var that=this;this.bqLogs[logType]=this.bqLogs[logType]||[];logs.forEach(function(item){that.bqLogs[logType].push(item);});this.logConsole('Adding logs to queue ('+logType+')',false,'BQ');var nbLogs=0;for(var type in this.bqLogs){nbLogs+=this.bqLogs[type].length;}
if(nbLogs>BQ_LOGS_MAXQUEUE){this.bqBulkPost();}
else{this.bqTimer=window.setTimeout(function(){that.bqBulkPost();},BQ_LOGS_TIMEOUT);}},bqBulkPost:function(){var payload=[];for(var logType in this.bqLogs){if(this.bqLogs[logType].length>0){payload.push({logtype:logType,logs:this.bqLogs[logType]});}}
this.bqLogs={};window.clearTimeout(this.bqTimer);if(payload.length>0){this.logConsole('Sending logs',false,'BQ');this.logConsole(payload,logType,'BQ');var bqEndpoint=(window.location.hostname.indexOf('local')!==-1)?BQ_ENDPOINT_LOCAL:BQ_ENDPOINT_PROD;return this.sendRequest('POST',bqEndpoint,[],payload);}},sendRequest:function(method,endpoint,headers,payload){var request=window.XDomainRequest?new XDomainRequest():new XMLHttpRequest();request.open(method,endpoint,true);if(!window.XDomainRequest){for(var i=0,l=headers.length;i<l;i++){request.setRequestHeader(headers[i].header,headers[i].value);}}
return request.send(JSON.stringify(payload));},getConfig:function(key){if(!this.hashs){this.hashs=this.getLocationHash();}
return this.hashs[key]||window.localStorage&&localStorage.getItem(key)||'';},getLocationHash:function(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}};return logger;})();
var AufSession=window.AufSession||(function(){var COOKIE_NAME='af_session';var SESSION_TTL_MINUTES=30;var session=function(){if(!window.JSON)return;this.init();};session.prototype={constructor:session,init:function(){this.af_segment_versions=[{name:'0',percentage:10},{name:'1',percentage:10},{name:'2',percentage:10},{name:'3',percentage:10},{name:'4',percentage:10},{name:'5',percentage:10},{name:'6',percentage:10},{name:'7',percentage:10},{name:'8',percentage:10},{name:'9',percentage:10}];var rawCookie=af_getCookie(COOKIE_NAME);if(!rawCookie){this.cookie={visitorId:this.getGuid(),sessionId:1,sessionStartTime:this.getTime(),sessionUtm:this.getUtmFromUrl(),pageviewId:1,waveId:0,rankId:0,segment:this.generateSegment()};this.save();}else{this.cookie=JSON.parse(decodeURIComponent(rawCookie));if(typeof this.cookie.rankId==='undefined'){this.cookie.rankId=this.cookie.waveId;}
this.updatePageview();}},save:function(){this.updateAdTargetingKeywords();af_setPermCookie(COOKIE_NAME,JSON.stringify(this.cookie));},getVisitorId:function(){return this.cookie.visitorId;},getSessionId:function(){return this.cookie.sessionId;},getPageviewId:function(){return this.cookie.pageviewId;},getWaveId:function(){return this.cookie.waveId;},getRankId:function(){return this.cookie.rankId;},getUtm:function(){return{source:this.getUtmSource(),medium:this.getUtmMedium(),campaign:this.getUtmCampaign()};},getSegment:function(){return this.cookie.segment;},getUtmQuerystring:function(){var keywords=this.getUtm();var arr=[];for(var key in keywords){if(keywords[key]){arr.push('utm_'+key+'='+keywords[key]);}}
return arr.join('&');},getUtmSource:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.source?this.cookie.sessionUtm.source:'';},getUtmMedium:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.medium?this.cookie.sessionUtm.medium:'';},getUtmCampaign:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.campaign?this.cookie.sessionUtm.campaign:'';},isPaid:function(){return this.getUtmMedium()==='partner'&&this.getUtmSource().indexOf('cm-')===0||this.getUtmMedium()==='cpc';},updateSession:function(){if(this.isSessionExpired()){this.newSession();this.newSegment();this.newPageview(true);this.newWave(true);this.newRank(true);}
this.cookie.sessionStartTime=this.getTime();this.save();},updatePageview:function(){this.newPageview();this.newWave(true);this.updateSession();},updateWave:function(){this.newWave();this.newRank();this.updateSession();},isSessionExpired:function(){var now=new Date();var sessionStartDateString=new Date(this.cookie.sessionStartTime).toDateString();var sessionEndTime=this.cookie.sessionStartTime+SESSION_TTL_MINUTES*60*1000;var utmFromUrl=this.getUtmFromUrl();return(now.getTime()>sessionEndTime||now.toDateString()!==sessionStartDateString||utmFromUrl&&utmFromUrl.source&&utmFromUrl.source!==this.getUtmSource());},newSession:function(){this.cookie.sessionId=(this.cookie.sessionId>=1000?1:(this.cookie.sessionId+1)%1000);this.cookie.sessionUtm=this.getUtmFromUrl();},newPageview:function(reset){this.cookie.pageviewId=((reset||this.cookie.pageviewId>=1000)?1:(this.cookie.pageviewId+1)%1000);},newWave:function(reset){this.cookie.waveId=((reset||this.cookie.waveId>=1000)?0:(this.cookie.waveId+1)%1000);},newRank:function(reset){this.cookie.rankId=((reset||this.cookie.rankId>=1000)?0:(this.cookie.rankId+1)%1000);},newSegment:function(){this.cookie.segment=this.generateSegment();},generateSegment:function(){var values=this.af_segment_versions;var randomPercentage=Math.random()*100;var currentPercentage=0;for(var i=0;i<values.length;i++){var item=values[i];currentPercentage+=item['percentage'];if(randomPercentage<currentPercentage){return item['name'];}}
return'';},getAdTargetingKeywords:function(){return{'visitor':this.getVisitorId(),'session':this.getSessionId(),'pageview':this.getPageviewId(),'wave':this.getWaveId(),'rank':this.getRankId(),'utm_source':this.getUtmSource(),'utm_medium':this.getUtmMedium(),'utm_campaign':this.getUtmCampaign(),'segment':this.getSegment()+'s'};},getAdTargetingKeywordsFormatted:function(){var keywords=this.getAdTargetingKeywords();var arr=[];for(var key in keywords){if(keywords[key]){arr.push(key+'='+keywords[key]);}}
return';'+arr.join(';')+';';},updateAdTargetingKeywords:function(){var keywords=this.getAdTargetingKeywords();window.sas_target=window.sas_target||'';for(var key in keywords){if(window.afAd){afAd.updateKeyword(key,keywords[key]);}else{afAd_updateKeyword(key,keywords[key]);}}},getTime:function(){return(new Date()).getTime();},getGuid:function(){return Date.now().toString()+Math.floor(Math.random()*1000).toString();},getUtmFromUrl:function(){var hash=document.location.hash.substring(1);var querystring=document.location.search.substring(1);var combination=querystring+'&'+hash;if(querystring||hash){var combinationArray=combination.replace(/&|#/g,'|').split('|');var utm={};for(var i=0,l=combinationArray.length;i<l;i++){var combinationValue=combinationArray[i].split('=');var key=combinationValue[0];var value=combinationValue[1];if(key&&value){var qmPos=value.indexOf('?');if(qmPos>=0){value=value.substr(0,qmPos);}
switch(key){case'utm_source':utm.source=value;break;case'utm_medium':utm.medium=value;break;case'utm_campaign':utm.campaign=value;break;}}}
return utm;}
return null;},debug:function(){console.table(this);}};return session;})();
var AufBid=window.AufBid||{};AufBid.OathAdapter=(function(){var ENDPOINT='https://adserver-eu.adtech.advertising.com/pubapi/3.0';return extend(AufBid.AufAdapter,{requestBids:function(){var contentType=(window.af_dataLayer&&af_dataLayer[0]?'contenttype='+af_dataLayer[0].pageInfo.contentType.toLowerCase():'');for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var callback=this.createCallback(formatId,placement.tag,placement.size);var src=ENDPOINT+'/'+this.options.accountId+'/'+placement.tag+'/0/0/'
+';cmd=bid'
+';cors=yes'
+';v=2'
+';misc='+new Date().getTime()
+';callback='+callback.name
+(contentType?';kv'+contentType:'');this.options.gdpr.applies=1;if(this.options.gdpr.applies){src+=';euconsent='+this.options.gdpr.consentString
+';gdpr='+this.options.gdpr.applies;}
this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response,formatId,placementId){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(rawBid){if(!rawBid){this.logError('No rawBid');return;}
var creativeHTML='';try{creativeHTML=decodeURIComponent(rawBid.adm);}catch(e){this.logError('Bad response parsing: '+e.message
+'('+(rawBid.adm?rawBid.adm.substr(0,100):'no HTML')+')');return;}
var cpmRaw;if(rawBid.ext&&rawBid.ext.encp){cpmRaw=rawBid.ext.encp;}else{cpmRaw=rawBid.price;}
if(cpmRaw===null||isNaN(cpmRaw)){this.logError('Invalid cpm in bid response');return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:rawBid.w+'x'+rawBid.h,cpmRaw:cpmRaw,currency:response.cur},{creativeHTML:creativeHTML});},this);},this);}});})();
var AufBid=window.AufBid||{};AufBid.SmartrtbplusAdapter=(function(){var ENDPOINT='https://ww1.smartadserver.com/prebid/v1';var DEBUG_SITE_ID=207435;var DEBUG_PAGE_ID=896536;var DEBUG_FORMAT_ID=62913;return extend(AufBid.AufAdapter,{requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var sizes=placement.size.split(',').map(function(size){var sizeArr=size.split('x');return{w:sizeArr[0],h:sizeArr[1]};});var query={siteid:(this.debug?DEBUG_SITE_ID:this.options.siteId),pageid:(this.debug?DEBUG_PAGE_ID:sas_pageId),formatid:(this.debug?DEBUG_FORMAT_ID:placement.tag),targeting:'hb=1',currencyCode:this.options.currency,sizes:sizes,pageDomain:location.href};this.options.gdpr.applies=1;if(this.options.gdpr.applies){query.gdpr_consent=this.options.gdpr.consentString;query.gdpr=this.options.gdpr.applies;}
var callback=this.createCallback(formatId,placement.tag,placement.size);this.manager.utils.ajax(ENDPOINT,callback.func,JSON.stringify(query),{method:'POST',withCredentials:true});},this);}}},getBidsFromResponse:function(response,formatId,placementId){if(!response){this.log('No bid');return;}
var rawBid;try{rawBid=JSON.parse(response);}catch(e){if(response.toLowerCase().indexOf('adblock')<0){this.logError('Bad response parsing: '+response);}
return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:rawBid.width+'x'+rawBid.height,cpmRaw:rawBid.cpm},{creativeHTML:rawBid.ad,dealId:rawBid.dealId});}});})();
var AufBid=window.AufBid||{};AufBid.AppnexusAdapter=(function(){var ENDPOINT='https://ib.adnxs.com/jpt';var ENDPOINT_V2='https://ib.adnxs.com/ut/v3/prebid';return extend(AufBid.AufAdapter,{bidTTL:300,constructor:function(manager,params){this.super.constructor.call(this,manager,params);this.useNewApi=this.manager.getConfig('hb_appnexusV2');this.log('AppNexus library V'+(this.useNewApi?'2':'1'),'warn');},requestBids:function(){var data={tags:[]};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){if(this.useNewApi){var sizes=placement.size.split(',').map(function(size){var sizeArr=size.trim().split('x');return{width:sizeArr[0],height:sizeArr[1]};});data.tags.push({ad_types:['banner'],allow_smaller_sizes:true,disable_psa:true,id:placement.tag,prebid:true,primary_size:sizes[0],sizes:sizes,use_pmt_rule:false,uuid:formatId+'-'+placement.tag+'-'+placement.size});}else{var callback=this.createCallback(formatId,placement.tag,placement.size);var query={id:placement.tag,psa:0,referrer:window.location.hostname,size:placement.size.split(',')[0],promo_sizes:placement.size.split(',').slice(1).join(','),callback:callback.name};this.options.gdpr.applies=1;if(this.options.gdpr.applies){query.gdpr_consent=this.options.gdpr.consentString;query.gdpr=this.options.gdpr.applies;}
var src=ENDPOINT+'?'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);}},this);}}
if(this.useNewApi){var callback=this.createCallback();this.manager.utils.ajax(ENDPOINT_V2,callback.func,JSON.stringify(data),{method:'POST',withCredentials:true});}},getBidsFromResponse:function(response,formatId,placementId,size){if(!response||response&&!response.result){this.logError('Empty response');return;}
if(response&&response.result.cpm===0){this.log('No bid');return;}
var rawBid=response;this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:rawBid.result.width+'x'+rawBid.result.height,cpmRaw:rawBid.result.cpm/10000},{creativeId:rawBid.result.creative_id,creativeURL:rawBid.result.ad,subtype:rawBid.result.media_subtype_id,type:rawBid.result.media_type_id});}});})();
(function(window){var h="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function u(){u=function(){};n.Symbol||(n.Symbol=y)}var z=0;function y(a){return"jscomp_symbol_"+(a||"")+z++}
function B(){u();var a=n.Symbol.iterator;a||(a=n.Symbol.iterator=n.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&h(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return C(this)}});B=function(){}}function C(a){var b=0;return D(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function D(a){B();a={next:a};a[n.Symbol.iterator]=function(){return this};return a}function E(a){B();var b=a[Symbol.iterator];return b?b.call(a):C(a)}
function F(a,b){if(b){for(var c=n,d=a.split("."),e=0;e<d.length-1;e++){var g=d[e];g in c||(c[g]={});c=c[g]}d=d[d.length-1];e=c[d];g=b(e);g!=e&&null!=g&&h(c,d,{configurable:!0,writable:!0,value:g})}}F("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&(a[g]=e[g])}return a}});function H(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(b.call(c,g,e,a))return{u:e,G:g}}return{u:-1,G:void 0}}F("Array.prototype.find",function(a){return a?a:function(a,c){return H(this,a,c).G}});F("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});F("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));for(var e=b.length,g=c||0;g<e;g++)if(b[g]==a||Object.is(b[g],a))return!0;return!1}});F("Promise",function(a){function b(a){this.b=0;this.i=void 0;this.a=[];var b=this.g();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}}function c(){this.a=null}if(a)return a;c.prototype.b=function(a){this.a||(this.a=[],this.g());this.a.push(a)};c.prototype.g=function(){var a=this;this.f(function(){a.i()})};var d=n.setTimeout;c.prototype.f=function(a){d(a,0)};c.prototype.i=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(m){this.h(m)}}}this.a=null};c.prototype.h=function(a){this.f(function(){throw a;})};b.prototype.g=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.U),reject:a(this.h)}};b.prototype.U=function(a){if(a===this)this.h(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.V(a);else{var c;a:switch(typeof a){case"object":c=null!=a;break a;case"function":c=!0;break a;default:c=!1}c?this.P(a):this.w(a)}};b.prototype.P=function(a){var b=void 0;try{b=a.then}catch(l){this.h(l);return}"function"==typeof b?this.H(b,a):this.w(a)};b.prototype.h=function(a){this.A(2,a)};b.prototype.w=function(a){this.A(1,a)};b.prototype.A=function(a,b){if(0!=this.b)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.b);this.b=a;this.i=b;this.N()};b.prototype.N=function(){if(this.a){for(var a=this.a,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.a=null}};var e=new c;b.prototype.V=function(a){var b=this.g();a.f(b.resolve,b.reject)};b.prototype.H=function(a,b){var c=this.g();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(G){g(G)}}:b}var e,g,f=new b(function(a,b){e=a;g=b});this.f(d(a,e),d(c,g));return f};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.f=function(a,b){function c(){switch(d.b){case 1:a(d.i);break;case 2:b(d.i);break;default:throw Error("Unexpected state: "+d.b);}}var d=this;this.a?this.a.push(function(){e.b(c)}):e.b(c)};b.resolve=function(a){return a instanceof b?a:new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(c,d){for(var e=E(a),g=e.next();!g.done;g=e.next())b.resolve(g.value).f(c,d)})};b.all=function(a){var c=E(a),d=c.next();return d.done?b.resolve([]):new b(function(a,e){function g(b){return function(c){f[b]=c;l--;l||a(f)}}var f=[],l=0;do f.push(void 0),l++,b.resolve(d.value).f(g(f.length-1),e),d=c.next();while(!d.done)})};b.$jscomp$new$AsyncExecutor=function(){return new c};return b});F("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});F("Array.prototype.findIndex",function(a){return a?a:function(a,c){return H(this,a,c).u}});function J(a){a=K(a);return Object.keys(a).map(function(b){return b+"\x3d"+a[b]}).join("\x26")}function K(a){var b={},c={},d;for(d in a)c.key=d,a.hasOwnProperty(c.key)&&a[c.key]&&(Array.isArray(a[c.key])?b[c.key]=a[c.key].join(","):"object"===typeof a[c.key]?(c.j=K(a[c.key]),Object.keys(c.j).map(function(a){return function(c){b[a.key+"."+c]=a.j[c]}}(c))):b[c.key]=a[c.key]),c={key:c.key,j:c.j};return b}
function L(a){return a.substring(a.indexOf("?")+1).split("\x26").reduce(function(a,c){var b=c.split("\x3d");a[b[0]]=b[1];return a},{})};function M(){var a=0;return function(){a++;return a}};function N(a){var b=Math.pow(10,3);return Math.round(a*b)/b};function O(a,b){var c={method:"GET",withCredentials:!0},c=void 0===c?{}:c;try{var d,e=!1,g=c.method||"GET";window.XMLHttpRequest?(d=new window.XMLHttpRequest,void 0===d.responseType&&(e=!0)):e=!0;e?(d=new window.XDomainRequest,d.onload=function(){b(d.responseText,d)},d.onerror=function(){console.log("xhr onerror")},d.ontimeout=function(){console.log("xhr timeout")},d.onprogress=function(){console.log("xhr onprogress")}):d.onreadystatechange=function(){4===d.readyState&&b&&b(d.responseText,d)};if("GET"===g){var f=aa(a);a=ba(f)}d.open(g,a);e||(c.withCredentials&&(d.withCredentials=!0),c.Y&&d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-Type",c.contentType||"text/plain"));d.send(void 0);return!0}catch(l){return console.error("xhr construction",l),!1}}
function aa(a){var b=document.createElement("a");b.href=decodeURIComponent(a);return{protocol:(b.protocol||"").replace(/:$/,""),hostname:b.hostname,port:+b.port,pathname:b.pathname&&b.pathname.replace(/^(?!\/)/,"/"),search:ca(b.search||""),hash:(b.hash||"").replace(/^#/,""),host:b.host}}function ba(a){return(a.protocol||"http")+"://"+(a.host||a.hostname+(a.port?":"+a.port:""))+(a.pathname||"")+(a.search?"?"+da(a.search||""):"")+(a.hash?"#"+a.hash:"")}
function ca(a){return a?a.replace(/^\?/,"").split("\x26").reduce(function(a,c){var b=c.split("\x3d"),e=E([b.shift(),b.join("\x3d")]),b=e.next().value,e=e.next().value;/\[\]$/.test(b)?(b=b.replace("[]",""),a[b]=a[b]||[],a[b].push(e)):a[b]=e||"";return a},{}):{}}function da(a){return Object.keys(a).filter(function(a){return"callback"!==a&&"jsonp"!==a}).map(function(b){return Array.isArray(a[b])?a[b].map(function(a){return b+"[]\x3d"+a}).join("\x26"):b+"\x3d"+a[b]}).join("\x26")};function P(a){var b=document.createElement("script");b.async=!0;b.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)};function ea(a,b){return a.map(function(a){return a.oxAdUnitId&&"display"===a.type||Q(a)?a:b.find(function(b){return a.getSlotElementId&&b.divId===a.getSlotElementId()})}).filter(function(a){return a})}function fa(a){return a.reduce(function(a,c){Q(c)?a[1].push(c):a[0].push(c);return a},[[],[]])}function Q(a){return a.oxAdUnitId&&"video"===a.type};function R(a){return a.reduce(function(a,c){return a.concat(Array.isArray(c)?R(c):c)},[])};var ga=M(),S=null;function U(a){a=a?a:{};this.id=ga();this.adMapping=a;this.a=this.f=1;Q(a)?this.type="video":(this.type="display",this.divId=a.divId,this.h=a.oxAdUnitId)}function V(a){var b;b=void 0===b?1:b;S?a=S(a,b):(a=1E3*a/(void 0===b?1:b),b=Math.min(a,2E4),0<b&&25>b&&(b=25),a=1E3>a?5*Math.round(b/50):5E3>a?10*Math.round(b/100):50*Math.round(b/500));return a}
U.prototype.fill=function(a){a=a?a:{};this.D();this.adUnit=a;"video"===this.type?(this.b=a.cache_key,this.pub_rev=a.pub_rev?1E3*parseFloat(a.pub_rev):0,this.cpm=a.pub_rev?N(parseFloat(a.pub_rev)):0,this.per_colo_domain=a.per_colo_domain,this.ph=a.ph):(this.b=a.ts,this.pub_rev=a.pub_rev?parseInt(a.pub_rev,10):0,this.cpm=a.pub_rev?N(parseInt(a.pub_rev,10)/1E3):0,this.ad=a.html,this.g=a.deal_id,this.i=1===a.auct_win_is_deal,a.creative&&0<a.creative.length?(this.width=parseInt(a.creative[0].width,10),this.height=parseInt(a.creative[0].height,10),this.tracking=a.creative[0].tracking):this.adMapping.sizes&&0<this.adMapping.sizes.length&&(this.width=this.adMapping.sizes[0][0],this.height=this.adMapping.sizes[0][1]));return this};U.prototype.fill=U.prototype.fill;U.prototype.m=function(){var a=[V(this.cpm)];this.g&&a.push(this.g);this.i&&a.push("pmp"+V(this.cpm));a=a.join(",");return[this.width+"x"+this.height,a].join("_")};U.prototype.getOxTargetingValue=U.prototype.m;U.prototype.o=function(){return[this.width+"x"+this.height,V(this.adUnit&&this.adUnit.tbd||0)].join("_")};U.prototype.getSmartFloorTargetingValue=U.prototype.o;U.prototype.s=function(){return!(!this.adUnit||!this.adUnit.tbd)};U.prototype.hasSmartFloor=U.prototype.s;U.prototype.L=function(a){return this.R<(a||(new Date).getTime())-27E4};U.prototype.isExpired=U.prototype.L;U.prototype.D=function(){this.a=2};U.prototype.setFilled=U.prototype.D;U.prototype.l=function(){return 2<=this.a};U.prototype.isFilled=U.prototype.l;U.prototype.F=function(){this.a=3};U.prototype.setTargeted=U.prototype.F;U.prototype.M=function(){return 3<=this.a};U.prototype.isTargeted=U.prototype.M;U.prototype.C=function(){this.a=4};U.prototype.setDisplayed=U.prototype.C;U.prototype.O=function(){this.a=1};U.prototype.resetBidState=U.prototype.O;U.prototype.v=function(){return 4<=this.a};U.prototype.isDisplayed=U.prototype.v;function ha(a){a=a.map(function(a){return a.customKeyValuePairs});return a.filter(function(a){return a}).length?a.map(function(a){var b=a?Object.keys(a).map(function(b){var c=a[b],c=Array.isArray(c)?a[b]:[a[b]],c=c.filter(function(a){return["string","number","boolean"].includes(typeof a)}).join(",");return b+"\x3d"+c}).join("\x26"):"";return btoa(b.replace(/\+|\//g,function(a){return"+"===a?".":"_"}))}).join(","):""}
function ia(a,b,c,d){var e={};e.url=b.location.href&&encodeURIComponent(b.location.href);e.be=!0;e.auid=a.oxAdUnitId;e.bc="hb_lite_0.2.5";c&&(e.jsonp=c);d&&(e.tid=d);return J(e)}function ja(a){return a.filter(function(a){return a.floor&&!!a.floor}).length?a.map(function(a){return a.floor?Math.round(1E3*a.floor):0}).join(","):""}function ka(a){return a.map(function(a){return a.oxAdUnitId}).join("%2C")}
function la(a){return a.map(function(a){return Array.isArray(a.sizes)?a.sizes.map(function(a){return Array.isArray(a)?a[0]+"x"+a[1]:String(a)}).join(","):String(a.sizes)}).join("|")};var ma=M();function na(a,b){var c=(b&&b.document||window.document).body;c&&c.appendChild(oa(a,b))}function W(a,b,c,d,e){var g=a.tracking&&a.tracking.impression.match(/([^?]+\/)ri\?/),f={};f.bd=+new Date-b;f.bp=a.pub_rev;f.bs=d;f.bsq=a.f;f.bt=c;f.ca=0;f.ts=a.b;f.br=e?"t":a.pub_rev?"p":"0";g&&((new Image).src=g[1]+"bo?"+J(f),a.f++)}
function oa(a,b){var c=(b&&b.document||window.document).createElement("iframe");c.id="openx-pd"+ma();c.width="0";c.height="0";c.border="0px";c.frameBorder="0";c.hspace="0";c.marginHeight="0";c.marginWidth="0";c.scrolling="no";c.src=a||"about:blank";c.style.border="0";c.style.display="none";c.vspace="0";return c};function Y(a,b){this.adMappings=[];this.a=[];this.b=M();this.g=M();this.deliveryDomain="";this.singleRequest=!1;this.namespace="oxhbjs";this.timeLimit=2500;this.window=b||window;this.f=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;this.B(a);this.cmds={push:function(a){return a()}};return this}
Y.prototype.B=function(a){a=void 0===a?{}:a;this.deliveryDomain=a.deliveryDomain;this.timeLimit=a.timeLimit||this.timeLimit;this.singleRequest=void 0!==a.singleRequest?a.singleRequest:this.singleRequest;this.namespace=a.namespace||this.namespace;this.window[this.namespace]=this.window[this.namespace]||{};this.adMappings=a.adMappings||this.adMappings;this.contentTopicId=void 0!==a.contentTopicId?a.contentTopicId:this.contentTopicId;this.customKeyValuePairs=void 0!==a.customKeyValuePairs?a.customKeyValuePairs:this.customKeyValuePairs;a.customPriceBucket&&typeof a.customPriceBucket===Z&&(S=a.customPriceBucket);return this};Y.prototype.setConfig=Y.prototype.B;Y.prototype.K=function(a,b){function c(a,b,c,d){return new Promise(function(f){if(a){var l=new U(a),pa=(new Date).valueOf(),m="videoAdResponseHandler"+g.g(),v=ia(a,d,"window."+b+"."+m,A);d[b][m]=function(a,b,c){var d=!1,e=setTimeout(function(){d||(d=!0,c(l))},a);return function(f){var m=f;if("string"===typeof f)try{m=JSON.parse(f)}catch(sa){m={pub_rev:"",cache_key:"",per_colo_domain:"",ph:""}}l.fill({pub_rev:m.pub_rev,cache_key:m.cache_key,per_colo_domain:m.per_colo_domain,ph:m.ph});d||(d=!0,clearTimeout(e),c(l));g.a.push(l);W(l,pa,a,b,d)}}(c,d.location.hostname,f);P("//"+e+"/v/1.0/avjp?"+v)}else f()})}a=a?a:{};var d=this,e=a.deliveryDomain||this.deliveryDomain;if(!e)return console.error("OX Header Bidder: getBids() Error: deliveryDomain not defined"),new Promise(function(a){a([])});var g=this,f=a.timeLimit||this.timeLimit,l=void 0!==a.singleRequest?a.singleRequest:this.singleRequest,m=[],A=a.contentTopicId||this.contentTopicId,X=a.customKeyValuePairs||this.customKeyValuePairs;a.customPriceBucket&&typeof a.customPriceBucket===Z&&(S=a.customPriceBucket);var p=[];Array.isArray(a.adMappings)?p=ea(a.adMappings,this.adMappings):p=this.adMappings;var r=E(fa(p)),p=r.next().value,r=r.next().value;m.push(function(a,b,c,d,f){return new Promise(function(l){function m(a,b,c){var d=!1,e=a.map(function(a){return r.find(function(b){return b.divId===a.divId})}).filter(function(a){return a}),l=setTimeout(function(){d||(d=!0,c(r))},b);return function(a){var k=a;if("string"===typeof a)try{k=JSON.parse(a)}catch(t){k={ads:{ad:[],count:0,pixels:"",version:-1}}}a={ads:{ad:k.ads&&k.ads.ad,count:k.ads&&k.ads.count,pixels:k.ads&&k.ads.pixels,version:k.ads&&k.ads.version}};var m=d,k=qa(e,a.ads.ad||[]);p--;d||p||(d=!0,clearTimeout(l),c(r));g.a=g.a.concat(k);a.ads&&a.ads.pixels&&na(a.ads.pixels,f);k.forEach(function(a){W(a,v,b,f.location.hostname,m)})}}if(b.length&&b.length){var v=(new Date).valueOf(),p=a?1:b.length,r=b.map(function(a){return new U(a)}),T;b=a?[b]:b;b.forEach(function(b){var v=g.b();T="window."+c+".displayAdResponseHandler"+v;b=a?b:[b];var q;q=b;var p=T,r=A;if(Array.isArray(q)){var G=ja(q),w=f.self!==f.top,k={};k.auid=ka(q);k.aus=la(q);k.bc="hb_lite_0.2.5";k.be=1;k.ch=f.document.a||f.document.characterSet;k.ifr=w;k.jr=f.document.referrer;k.ju=f.location.href&&encodeURIComponent(f.location.href);k.res=f.screen.width+"x"+f.screen.height+"x"+f.screen.colorDepth;var x,t;t=f;x=f.document;var I;w?(t=f.top,x=f.top.document,w=x.documentElement,I=x.body,x=t.innerWidth||w.clientWidth||I.clientWidth,t=t.innerHeight||w.clientHeight||I.clientHeight):(w=x.documentElement,x=t.innerWidth||w.clientWidth,t=t.innerHeight||w.clientHeight);k.tws=x+"x"+t;k.tz=(new Date).getTimezoneOffset();k.nocache=(new Date).getTime();k.callback=p;k.aumfs=G;k.tid=r;k.c=X;k.tps=ha(q);q=J(k)}else q="";q="//"+e+"/w/1.0/arj?"+q;b=m(b,d,l);v="displayAdResponseHandler"+v;p=!0;g.f&&(p=!O(q,b));p&&(f[c][v]=b,P(q))})}else l([])})}(l,p,this.namespace,f,this.window));l=r.map(function(a){return c(a,d.namespace,f,d.window)});return Promise.all(m.concat(l)).then(function(a){var c=(new Date).getTime();a=R(a).filter(function(a){return a}).map(function(a){a.R=c;return a});b&&b(a);return a})};Y.prototype.getBids=Y.prototype.K;Y.prototype.S=function(a,b){if(a){var c=function(a,b){var c=a.getSlotElementId();return b.find(function(a){return a.divId===c&&!a.J&&!a.v()})||null}(a,b),d=function(a,b){return b?a.getSizes().some(function(a){return a.getWidth()===b.width&&a.getHeight()===b.height}):!1}(a,c),e;e=a.getSizes()[0].getWidth()+"x"+a.getSizes()[0].getHeight();e=c?c.l()?d?c.m():e+"_0":e+"_t":e+"_0";try{a.setTargeting("oxb",e),c&&c.l()&&d&&(a.setTargeting("oxb_bid_id",c.id.toString()),a.setTargeting("oxb_bid_namespace",this.namespace),c.s()&&a.setTargeting("oxb1",c.o()),c.F())}catch(g){console.error("AuctionEvents.ERROR","Unexpected error in setOxTargeting",g)}}};Y.prototype.setOxTargetingForGoogletagSlot=Y.prototype.S;Y.prototype.T=function(a,b,c){var d=b.oxb_bid_id&&parseInt(b.oxb_bid_id[0],10);if((a=c.document)&&d)try{var e=this.a.find(function(a){return a.id===d});if(e){e.C();e.J=e.Z=!0;var g=e.height,f=e.width,l=e.W,m=e.ad;a===document||"video"===e.X?console.error("Error trying to write ad. Ad render call ad id "+d+" was prevented from writing to the main document."):m?(a.write(m),a.close(),a.defaultView&&a.defaultView.frameElement&&(a.defaultView.frameElement.width=f,a.defaultView.frameElement.height=g)):l?(a.write('\x3cIFRAME SRC\x3d"'+l+'" FRAMEBORDER\x3d"0" SCROLLING\x3d"no" MARGINHEIGHT\x3d"0" MARGINWIDTH\x3d"0" TOPMARGIN\x3d"0" LEFTMARGIN\x3d"0" ALLOWTRANSPARENCY\x3d"true" WIDTH\x3d"'+f+'" HEIGHT\x3d"'+g+'"\x3e\x3c/IFRAME\x3e'),a.close(),a.defaultView&&a.defaultView.frameElement&&(a.defaultView.frameElement.width=f,a.defaultView.frameElement.height=g)):console.error("Error trying to write ad. No ad for bid response id: "+d)}else console.error("Error trying to write ad. Cannot find ad by given id : "+
d)}catch(A){console.error("Error trying to write ad Id :"+d+" to the page:"+A.message)}else console.error("Error trying to write ad Id :"+d+" to the page. Missing document or adId")};Y.prototype.showAd=Y.prototype.T;Y.prototype.I=function(a,b){a=void 0===a?"":a;if(!b)return a;var c=a.substring(0,a.indexOf("?")+1),d=L(a),e=encodeURIComponent("ff\x3d"+b.b+"\x26oxcolo\x3d"+b.per_colo_domain+"\x26oxph\x3d"+b.ph+"\x26oxb\x3d"+d.sz+"v_"+V(b.cpm));d.url=window.location.href&&encodeURIComponent(window.location.href);d.description_url=window.location.hostname&&encodeURIComponent(window.location.hostname);d.cust_params=d.cust_params?d.cust_params+"%26"+e:e;return c+J(d)};Y.prototype.buildVastUrl=Y.prototype.I;function qa(a,b){var c=b.slice();return a.map(function(a){var b,d=c.findIndex(function(b){return String(a.h)===String(b.adunitid)&&ra(b,a.adMapping)});0<=d&&(b=c.splice(d,1)[0]);return a.fill(b)})}function ra(a,b){var c=a.creative&&a.creative[0];return b.sizes&&0!==b.sizes.length?c?b.sizes.some(function(a){if(!a)return!1;var b=E(a);a=b.next().value;b=b.next().value;return a==c.width&&b==c.height}):!1:!0}var Z="function";window.HeaderBidder=Y;})(window)
var AufBid=window.AufBid||{};AufBid.OpenxAdapter=(function(){var DEBUG_AD_UNIT_ID=539375251;return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);if(!window.HeaderBidder){this.disable();return;}
this.sdk=new HeaderBidder({timeLimit:this.manager.timeout,deliveryDomain:this.options.siteId+'-d.openx.net',singleRequest:true,adMappings:[]});},requestBids:function(){if(this.disabled){return;}
this.options.gdpr.applies=1;var pushUnits=[];for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var sizes=placement.size.split(',').map(function(size){return size.trim().split('x');});pushUnits.push({type:'display',oxAdUnitId:(this.debug?DEBUG_AD_UNIT_ID:placement.tag),sizes:sizes,gdpr:{gdprApplies:this.options.gdpr.applies,gdpr_consent:this.options.gdpr.consentString},divId:placement.tag,customKeyValuePairs:{formatId:formatId}});},this);}}
var callback=this.createCallback();var that=this;this.sdk.getBids({adMappings:pushUnits}).then(callback.func).catch(function(reason){that.logError('Bid request failed: '+reason);});},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(response.count===0){this.log('No bid');return;}
response.forEach(function(rawBid){if(!rawBid.ad||!rawBid.cpm){return;}
this.manager.addBid({account:this,formatId:rawBid.adMapping.customKeyValuePairs.formatId,placementId:rawBid.adMapping.oxAdUnitId,placementSize:rawBid.width+'x'+rawBid.height,cpmRaw:rawBid.cpm},{creativeHTML:rawBid.ad,advertiserId:rawBid.adUnit.adv_id,brandId:rawBid.adUnit.brand_id,dealId:rawBid.dealId,type:rawBid.adUnit.type});},this);}});})();
var AufBid=window.AufBid||{};AufBid.IndexExchangeAdapter=(function(){var ENDPOINT='https://as-sec.casalemedia.com/cygnus';var ENDPOINT_DEBUG='https://sandbox.ht.indexexchange.com/cygnus';var VERSION=7;return extend(AufBid.AufAdapter,{bidTTL:35,requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var placements={id:formatId+'_'+placement.tag+'_'+placement.size,imp:[],site:{page:window.location.href}};this.options.gdpr.applies=1;if(this.options.gdpr.applies){placements.regs={ext:{gdpr:this.options.gdpr.applies}};placements.user={ext:{consent:this.options.gdpr.consentString}};}
var sizes=placement.size.split(',');sizes.forEach(function(size){var sp=size.split('x');placements.imp.push({id:formatId+'-'+placement.tag+'-'+size,banner:{w:sp[0],h:sp[1]},ext:{sid:placement.tag+'_'+size,siteID:placement.tag}});},this);var callback=this.createCallback(formatId,placement.tag,placement.size);var query={v:VERSION,s:this.options.siteId,pid:this.options.accountId,fn:callback.name,r:JSON.stringify(placements)};var src=(this.debug?ENDPOINT_DEBUG:ENDPOINT)+'?'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response,formatId,placementId,size){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(rawBid){var cpmRaw=Number(rawBid.ext.pricelevel.match(/\d+/g).pop())/100||0;var placement=rawBid.impid.split('-');this.manager.addBid({account:this,formatId:placement[0],placementId:placement[1],placementSize:placement[2],cpmRaw:cpmRaw,currency:response.cur},{advertiserId:rawBid.ext.advbrandid,advertiser:rawBid.ext.advbrand,campaign:rawBid.cid,creativeHTML:decodeURIComponent(rawBid.adm),creativeId:rawBid.crid});},this);},this);}});})();
var AufBid=window.AufBid||{};AufBid.SovrnAdapter=(function(){var BEACON_ENDPOINT='https://ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js';var ENDPOINT='https://ap.lijit.com/rtb/bid';return extend(AufBid.AufAdapter,{requestBids:function(){if(!this.beaconCalled){this.beaconCalled=true;this.manager.utils.loadScript(BEACON_ENDPOINT
+'?iid='+this.options.accountId
+'&uid='+this.options.siteId,null,{id:'aufbid_sovrn_'+this.manager.callId});}
var query={id:this.options.accountId,imp:[],site:{domain:location.hostname,page:location.pathname}};if(this.options.gdpr.applies){query.regs={ext:{gdpr:this.options.gdpr.applies}};query.user={ext:{consent:this.options.gdpr.consentString}};}
for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var size=placement.size.split('x');var width=size[0];var height=size[1];query.imp.push({id:Date.now()+'-'+formatId+'-'+placement.tag,tagid:placement.tag,banner:{w:width,h:height}});});}}
var callback=this.createCallback();var src=ENDPOINT
+'?callback='+encodeURIComponent(callback.name)
+'&br='+encodeURIComponent(JSON.stringify(query));this.manager.utils.loadScript(src);},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(rawBid){var placement=rawBid.impid.split('-');var callbackFormatId=placement[1];var callbackPlacementId=placement[2];this.manager.addBid({account:this,formatId:callbackFormatId,placementId:callbackPlacementId,placementSize:rawBid.w+'x'+rawBid.h,cpmRaw:rawBid.price},{creativeHTML:decodeURIComponent(rawBid.adm),trackingPixels:[rawBid.nurl]});},this);},this);}});})();
/*! amazon-dtb-javascript-api - amzn_ads - v7.14.01 - 2018-08-24 22:03:28 */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DISPLAY_TARGETING_KEYS=["amznbid","amzniid","amznsz","amznp"],e.VIDEO_TARGETING_KEYS=["amznbid","amzniid","amznp","r_amznbid","r_amzniid","r_amznp"],e.BID_STATES={new:"NEW",exposed:"EXPOSED",set:"SET",rendered:"RENDERED"},e.DEBUG_LOCAL_STORAGE_KEY="apstagDebug",e.DEBUG_GLOBAL="apstagDEBUG",e.DEBUG_CONSOLE_LOCAL_STORAGE_KEY="apstagDebugConsole",e.CFG_LOCAL_STORAGE_KEY="apstagCfg",e.NO_LOCAL_STORAGE_SUPPORT_MAGIC_NUNMBER_FOR_AAX=0,e.MINIMUM_BID_TIMEOUT=0,e.MOCKBID={amznbid:"testBid",amzniid:"testImpression",amznp:"testP",crid:"testCrid"},e.MEDIA_TYPES_MAGIC_STRING_FOR_AAX={video:"v"},e.SLOT_STATE_KEYS=["amznbid","amznp"],e.FIRST_PARTY_COOKIE_KEYS={__apsid:{urlParam:"ck"},__aps_id_p:{urlParam:"ckp"},aps_ext_917:{urlParam:"st"}},e.SLOT_STATES={noRequest:"0",bidInFlight:"1",noBid:"2"},e.APSTAG_CONSOLE_ENABLED="apstagConsoleEnabled",e.APSTAG_CONSOLE_DISABLED="apstagConsoleDisabled",e.AAX_RESP_REMAP_COOKIE_KEY="cr",e.SELF_SERVE_PUB_SRC="600",e.LIBRARY_VERSION="7.14.01",e.PROTOCOL=function(){try{var t=window.document.location.protocol;if("h"===t[0])return t+"//"}catch(t){}return"https://"}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.shouldSample=function(t){try{var e=parseInt(t,10);if(!isNaN(e)){if(e<=0)return!1;if(e>=100)return!0;if(100*Math.random()<=e)return!0}return!1}catch(t){return!1}},e.getRandomArrayElement=function(t){return o(t)[0]},e.shuffleArray=o,e.getRand=function(){return""+Math.round(1e12*Math.random())+Date.now()},e.isObject=i,e.isArray=c,e.safeObjectHasProp=s,e.hasLocalStorage=d,e.checkAllPossibleBidCacheIds=function(t,e,n){return t.amzniid===e||t[n+"amzniid"]===e||t.amzniid_sp===e},e.inArray=u,e.isDebugEnabled=function(t){if(!d())return!1;var e=window.localStorage.getItem(a.DEBUG_LOCAL_STORAGE_KEY);if(null===e)return!1;if("true"===e)return!0;if("false"===e)return!1;var n=void 0;try{n=JSON.parse(e)}catch(t){return!1}return!(null===n||!c(n))&&u(n,t)},e.getDebugValue=function(t){return s(window,a.DEBUG_GLOBAL)&&s(window[a.DEBUG_GLOBAL],t)?window[a.DEBUG_GLOBAL][t]:""};var a=n(0);function o(t){var e=t.length,n=void 0,r=void 0;for(t=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t));0!==e;)r=Math.floor(Math.random()*e),n=t[--e],t[e]=t[r],t[r]=n;return t}function i(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t,e){return i(t)&&Object.prototype.hasOwnProperty.call(t,e)&&void 0!==t[e]&&""!==t[e]}function d(){var t="amzn_lsTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}function u(t,e){return-1!==t.indexOf(e)}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDPR=e.cmpLocalStorageChanged=e.cmpResponseKey=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1);Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};var i=e.cmpResponseKey="cmpRTimesA",c=e.cmpLocalStorageChanged="crfgL0cSt0rC";e.GDPR=function(t,e,n){t=a({},t);var s=void 0,d=50,u=[1,1,3,5],l=0,m=!1,p="crfgL0cSt0r",g=!1,f="cmp-timeout";try{!function(){e=n.wrapFunction(e,"GdprCallback");var y=function(t){try{if(!(0,o.hasLocalStorage)())return;window.localStorage.setItem(c,"0"),!1!==g&&g.enabled===t.enabled&&g.consent===t.consent||(window.localStorage.setItem(c,"2"),window.localStorage.setItem(p,JSON.stringify({enabled:t.enabled,consent:t.consent})),!1!==g&&(h.lsStatus="cmp-override",window.localStorage.setItem(c,"1"))),window.document.cookie=p+"=true;max-age=604800"}catch(t){return void n.reportError(t,"__gdpr_save__")}},_=function(t){try{t=a({},t),Object.keys(t.log).map(function(e){"string"==typeof t.log[e]&&-1!==t.log[e].indexOf("/")&&(t.log[e]=encodeURIComponent(t.log[e]))}),t.log=JSON.stringify(t.log)}catch(t){n.reportError(t,"__gdpr_stringify_log__")}e(t)};"object"===(void 0===t?"undefined":r(t))&&null!==t||(t={});var h={cmpGlobal:t.cmpGlobal,cmpTimeout:t.cmpTimeout,enabled:t.enabled};(0,o.hasLocalStorage)()&&(g=function(){try{var t=window.localStorage.getItem(p);return null!==t&&JSON.parse(t)}catch(t){return n.reportError(t,"__gdpr_parse_ls__"),!1}}()),!1!==g&&(void 0===window.document.cookie||-1===window.document.cookie.indexOf(p+"=true")?(g=!1,h.lsStatus="invalid"):(h.lsStatus="present",d=50,f="cmp-timeout-cfb")),"string"!=typeof t.cmpGlobal&&(t.cmpGlobal="__cmp"),Number.isInteger(t.cmpTimeout)||(t.cmpTimeout=d);var v,b,T=(b={log:h},void 0===(v=t).enabled?b:!1===v.enabled?(b.enabled=0,b):(Number.isInteger(v.enabled)?b.enabled=v.enabled:b.enabled=1,"string"==typeof v.consent&&(b.consent=v.consent),b));!1!==g&&(T=a({},g,T)),!1===g||g.enabled===T.enabled&&g.consent===T.consent||(h.lsStatus="pub-override"),function t(e,r){if(!(0,o.safeObjectHasProp)(window,e.cmpGlobal)||"function"!=typeof window[e.cmpGlobal])return r({error:"no-cmp"}),void(l<u.length&&(setTimeout(t,1e3*u[l],e,r),l++));setTimeout(r,e.cmpTimeout,{timeout:!0},!0),s=Date.now();try{window[e.cmpGlobal]("getConsentData",null,r)}catch(t){r({error:"cmp-internal-error"}),n.reportError(t,"__gdpr_cmp__")}}(t,function(t,e,a){if(!m||"object"!==(void 0===e?"undefined":r(e))||null===e||!e.timeout){m=!0;try{return"object"===(void 0===e?"undefined":r(e))&&null!==e&&void 0!==e.error?(h.status=e.error,void _(t)):a&&"object"===(void 0===e?"undefined":r(e))&&null!==e?e.timeout?(h.status=f,void _(t)):(function(t){if((0,o.hasLocalStorage)())try{var e=window.localStorage.getItem(i);(e=null!==e?JSON.parse(e):[]).push(t),window.localStorage.setItem(i,JSON.stringify(e))}catch(t){n.reportError(t,"__gdpr_save_time__")}}(Date.now()-s),h.status="success",e.gdprApplies?(t.enabled=1,t.consent=e.consentData,y(t),void _(t)):(t.enabled=0,delete t.consent,y(t),void _(t))):(h.status="cmp-error",void _(t))}catch(e){return n.reportError(e,"__gdpr_cmp_callback__"),h.status="func-error",void _(t)}}}.bind(null,T))}()}catch(t){m||e({log:'{"status":"global-func-error"}'}),m=!0,n.reportError(t,"__gdpr_global_func__")}}},,,,,,function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(3),i={log:'{"status":"cmp-in-flight"}'},c=!1,s=[],d={wrapFunction:function(t){return function(){try{return t.apply(null,arguments)}catch(t){return null}}},reportError:console.error};(0,o.GDPR)({},function(t){i=t,c=!0,s.map(function(t){try{t()}catch(t){}}),s=[]},d),window.amznpassback=window.amznpassback||{},window.amznpassback.CPM_JS||(window.amznpassback.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz");var u=window.amznpassback;function l(t,e){t.write(e),t.close()}function m(t){var e=!1;function n(t){if(!e){e=!0;var n=document.createElement("iframe");n.style.display="none",n.src=t,document.body.appendChild(n)}}document.readyState&&"loading"==document.readyState?document.addEventListener?document.addEventListener("DOMContentLoaded",function(){n(t)},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&n(t)}):n(t)}Date.now||(Date.now=function(){return(new Date).getTime()});var p=function(t,e,n){var d="https:"===e.location.protocol;t.latencyUtil=t.latencyUtil||null,t.protocol=d?"https://":"http://",t.DEFAULT_HOST="aax.amazon-adsystem.com",t.host=t.DEFAULT_HOST,t.dtb_svc="/e/dtb/bid",t.pb_svc="/x/getad",t.px_svc="/x/px/",t.debug_mode=t.debug_mode||!1,t.MIN_TIMEOUT=0,t.DEFAULT_TIMEOUT=1e3,t.targetingKey="amznslots",t.latencySamplingRate=1,t.vidKey="amzn_vid",t.tasks=t.tasks||[],t.VIEWABILITY_CUTOFF_AREA=t.VIEWABILITY_CUTOFF_AREA||.5,t.VIEWABILITY_CUTOFF_DURATION_SEC=t.VIEWABILITY_CUTOFF_DURATION_SEC||1,t.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",t.vads={};var u=!1,g=new function(){this.metrics={},this.t0=Date.now(),this.i=0,this.addTimer=function(t,e){e||(e=Date.now()),this.metrics[t]=e-this.t0},this.set=function(t,e){this.metrics[t]=e},this.schedule=function(e,n){var r=this;e||(e=5e3),n||(n="PH"),n+="/",setTimeout(function(){r.metrics.i=r.i,r.metrics.t0=r.t0,r.metrics.site=r.getTopDomain(t),r.metrics={},r.t0=Date.now(),r.i++},e)},this.getTopDomain=function(t){var e=decodeURIComponent(t.getReferrerURL());return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]}};function f(e,n,r,a,o){var i=null;o=o||{};try{n&&"function"==typeof n&&(i=t.handleCallBack(n,r))}catch(t){}o.to||(o.to=r),t.doGetAdsAsync(e,a,o,i)}function y(e,n,r){this.startTime=null,this.stopTime=null,this.sourceId=n,this.sync=e,this.mode=r,this.latency=null,y.prototype.startTimer=function(){this.startTime=Date.now()},y.prototype.stopTimer=function(){this.stopTime=Date.now()},y.prototype.stopTimerAndReportLatency=function(){this.stopTimer(),this.calculateLatency(),this.isThrottled()||this.reportLatency()},y.prototype.calculateLatency=function(){this.latency=this.stopTime-this.startTime},y.prototype.isThrottled=function(){var e=parseInt(t.latencySamplingRate,10);if(!isNaN(e)){if(0==e)return!0;if(100==e)return!1;if(100*Math.random()<=e)return!1}return!0},y.prototype.reportLatency=function(){null!==this.latency&&this.latency}}return g.addTimer("tlt"),t.ads||(t.ads={}),t.updateAds=function(e){if(e&&e.cmp&&""!=e.cmp&&"undefined"!=e.cmp&&m(e.cmp),u=!0,t.ads=e.ads,t.ev=e.ev,e.vads){var n;t.vads=e.vads,t.ads||(t.ads={});var r=!1;for(n in e.vads)e.vads.hasOwnProperty(n)&&-1!=n.indexOf("_d")&&(t.ads[n]=e.vads[n],t.amzn_vid=e.vads[n],r=!0);if(!r)for(n in e.vads)e.vads.hasOwnProperty(n)&&(t.ads[n]=e.vads[n],t.amzn_vid=e.vads[n])}t.doAllTasks(),t.tasks.push=function(e){t.doTask(e)};try{e.lsr&&(t.latencySamplingRate=e.lsr),e.rm&&(g.addTimer("br"),g.set("brs","1"),g.schedule(e.to,e.id)),null!==t.latencyUtil&&t.latencyUtil.stopTimerAndReportLatency()}catch(t){}},t.aaxPunt=function(t){try{t&&t.cmp&&""!=t.cmp&&"undefined"!=t.cmp&&m(t.cmp),u=!0,g.addTimer("br"),g.set("brs","0"),t&&t.rm&&g.schedule(t.to,t.id)}catch(t){}},t.saveAds=function(e){t.saved_ads=e.ads,t.updateAds(e)},t.getAdForSlot=function(n,r,a){t.src_id=n;var o=o||{},i=o.u;t.host=3e3==n?"aax-cpm.amazon-adsystem.com":t.host,i||(i=t.getReferrerURL()),i&&-1!==i.indexOf("amzn_debug_mode")&&(t.debug_mode=!0);var c="src="+t.src_id+"&slot_uuid="+r+"&c=100&u="+i+"&cb="+Math.round(1e7*Math.random()),s=t.protocol+t.host+t.pb_svc+"?jsd=1&"+c;a?t.appendScriptTag(s):l(e,"<script type='text/javascript' src='"+s+"'><\/script>")},t.getAdsCallback=function(t,e,n,r,a){a=a||{},c?f(t,e,n,r,a):s.push(f.bind(null,t,e,n,r,a))},t.getVideoAdsCallback=function(e,n,r,a,o){(o=o||{}).mt="V",t.getAdsCallback(e,n,r,a,o)},t.getDisplayAdsCallback=function(e,n,r,a,o){(o=o||{}).mt="D",t.getAdsCallback(e,n,r,a,o)},t.getAdsAsync=function(e,n,r){t.doGetAdsAsync(e,n,r)},t.getVideoAdsAsync=function(e,n,r){(r=r||{}).mt="V",t.getAdsAsync(e,n,r)},t.getDisplayAdsAsync=function(e,n,r){(r=r||{}).mt="D",t.getAdsAsync(e,n,r)},t.handleCallBack=function(e,r){var a=!1,o=null,i=function(t){if(!a){try{e(t),o&&clearTimeout(o),t||g.set("to","1")}catch(t){}a=!0}},c=t.getValidMilliseconds(r);return o=c?n.setTimeout(i,c):n.setTimeout(i,t.DEFAULT_TIMEOUT),i},t.getValidMilliseconds=function(e){if(!e)return!1;try{var n=~~Number(e);if(n>t.MIN_TIMEOUT)return n}catch(t){return!1}return!1},t.getAds=function(n,r,a,o){if(u=!1,o)t.doGetAdsAsync(n,r,a);else{var i=t.getScriptSource(n,r,a);try{t.latencyUtil=new y(!0,n,a&&a.mt?a.mt:"DV"),t.latencyUtil.startTimer(),g.addTimer("sb"),g.set("src",n)}catch(t){}i&&l(e,"<script type='text/javascript' src='"+i+"'><\/script>")}},t.getVideoAds=function(e,n,r,a){(r=r||{}).mt="V",t.getAds(e,n,r,a)},t.getDisplayAds=function(e,n,r,a){(r=r||{}).mt="D",t.getAds(e,n,r,a)},t.doGetAdsAsync=function(e,n,r,a){u=!1;var o=t.getScriptSource(e,n,r);try{t.latencyUtil=new y(!1,e,r&&r.mt?r.mt:"DV"),t.latencyUtil.startTimer(),g.addTimer("ab"),g.set("src",e)}catch(t){}t.appendScriptTag(o,a)},t.getScriptSource=function(c,s,d){if(!t.ssb){t.src_id=c;var u=(d=d||{}).u,l=d.d,m=d.to,p=d.mt;if(u||(u=t.getReferrerURL()),u&&-1!==u.indexOf("amzn_debug_mode")&&(t.debug_mode=!0),d.mt&&"V"!=d.mt&&"DV"!=d.mt||t.vads&&(t.vads={},delete t.amzn_vid),t.ads&&(t.clearTargetingFromGPTAsync(),t.ads={}),t.startTime&&a("number"==t.startTime)&&g.addTimer("st",t.startTime),t.saved_ads&&(t.ads=t.saved_ads),l)try{e.domain=l}catch(t){}var f="src="+c+"&u="+u+"&cb="+Math.round(1e7*Math.random());return s&&(f+="&sz="+s),m&&(f+="&t="+m),p&&(f+="&mt="+p),"object"===(void 0===i?"undefined":a(i))&&(y={enabled:"gdpre",consent:"gdprc",log:"gdprl"},_=r({},i),Object.keys(y).filter(function(t){return void 0!==_[t]}).map(function(t){switch(t){case"log":if(function(){var t="amzn_lsTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}()){var e=n.localStorage.getItem(o.cmpResponseKey);if(null!==e){try{e=JSON.parse(e)}catch(t){e=null}n.localStorage.removeItem(o.cmpResponseKey)}null!==e&&(_.log=JSON.stringify(r({},JSON.parse(_.log),{rtimes:e})));var a=n.localStorage.getItem(o.cmpLocalStorageChanged);null!==a&&(n.localStorage.removeItem(o.cmpLocalStorageChanged),_.log=JSON.stringify(r({},JSON.parse(_.log),{cc:a})))}}f+="&"+y[t]+"="+encodeURIComponent(_[t])})),t.protocol+t.host+t.dtb_svc+"?"+f}var y,_;t.ssb=!1},t.getReferrerURL=function(){var r=encodeURIComponent(e.documentURI);try{(r=encodeURIComponent(n.top.location.href))&&"undefined"!=r||(r=t.detectIframeAndGetURL())}catch(e){r=t.detectIframeAndGetURL()}return r},t.detectIframeAndGetURL=function(){try{if(n.top!==n.self)return encodeURIComponent(e.referrer)}catch(t){}return encodeURIComponent(e.documentURI)},t.appendScriptTag=function(t,n){if(t||!n||"function"!=typeof n){var r=e.getElementsByTagName("script")[0],a=e.createElement("script");a.type="text/javascript",a.async=!0,t&&(a.src=t);try{n&&"function"==typeof n&&(a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,n(!0))}:a.onload=function(){n(!0)})}catch(t){}r.parentNode.insertBefore(a,r)}else n.apply(this,[!0])},t.renderAd=function(e,n){if(t.ads[n]){g.addTimer("imp");var r=t.ads[n];if(t.ev){var a="amznad"+Math.round(1e6*Math.random());r=(r=r.replace("window.top.amznads.detectViewability","window.amzncsm.rmD")).replace(/id=[^ ]*/,'id="'+a+'"');var o="<script type='text/javascript' src='"+t.CSM_JS+"'><\/script>\n";t.host!=t.DEFAULT_HOST&&(o+="<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}<\/script>\n"),r=o+r}l(e,r)}else{g.set("kvm","1");var i={c:"dtb"};i.src=t.src_id,i.kvmismatch=1,i.pubReturnedKey=n,i.aaxReturnedKeys=t.getTokens(),i.cb=Math.round(1e7*Math.random());try{i.u=encodeURIComponent(location.host+location.pathname),navigator&&(i.ua=encodeURIComponent(navigator.userAgent))}catch(t){}}},t.hasAds=function(e){var n;if(!e)try{return Object.keys(t.ads).length>0}catch(e){for(n in t.ads)if(t.ads.hasOwnProperty(n))return!0}for(n in t.ads)if(t.ads.hasOwnProperty(n)&&n.indexOf(e)>0)return!0;return!1},t.getTargeting=function(){var e={},n=0;t.getTokens()&&t.getTokens().length>0?(n=1,e[t.targetingKey]=t.getTokens(),t.amzn_vid&&(e[t.vidKey]=t.amzn_vid)):u||(n=2);try{g.addTimer("gk"),g.set("gks",n)}catch(t){}return e},t.setTargeting=function(e,n){var r;for(r in t.ads)if(t.ads.hasOwnProperty(r)){if(n&&r.indexOf(n)<0)continue;e(r,"1")}},t.setTargetingForGPTAsync=function(e){try{if(e){t.targetingKey=e;var n=t.getTokens();void 0!==n&&n.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(e,n),t.amzn_vid&&googletag.pubads().setTargeting(t.vidKey,t.amzn_vid)})}else{var r;for(r in t.ads)t.ads.hasOwnProperty(r)&&function(){var e=r;googletag.cmd.push(function(){p.debug_mode,googletag.pubads().setTargeting(e,"1"),t.amzn_vid&&googletag.pubads().setTargeting(t.vidKey,t.amzn_vid)})}()}}catch(t){}},t.setTargetingForGPTSync=function(e){try{if(e){t.targetingKey=e;var n=t.getTokens();void 0!==n&&n.length>0&&(googletag.pubads().setTargeting(e,n),t.amzn_vid&&googletag.pubads().setTargeting(t.vidKey,t.amzn_vid))}else{var r;for(r in t.ads)t.ads.hasOwnProperty(r)&&(googletag.pubads().setTargeting(r,"1"),t.amzn_vid&&googletag.pubads().setTargeting(t.vidKey,t.amzn_vid))}}catch(t){}},t.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(t.targetingKey),googletag.pubads().clearTargeting(t.vidKey)}catch(t){}},t.appendTargetingToAdServerUrl=function(e){try{var n;-1===e.indexOf("?")&&(e+="?");for(n in t.ads)t.ads.hasOwnProperty(n)&&(e+="&"+n+"=1")}catch(t){}return e},t.appendTargetingToQueryString=function(e){try{var n;for(n in t.ads)t.ads.hasOwnProperty(n)&&(e+="&"+n+"=1")}catch(t){}return e},t.getTokens=function(e){var n,r=[];try{for(n in t.ads)if(t.ads.hasOwnProperty(n)){if(e&&n.indexOf(e)<0)continue;r.push(n)}}catch(t){}return r},t.getKeys=t.getTokens,t.getVid=function(){return t.amzn_vid},t.doAllTasks=function(){for(;t.tasks.length>0;){var e=t.tasks.shift();t.doTask(e)}},t.doTask=function(t){try{t.call()}catch(t){}},t.tryGetAdsAsync=function(){t.ssb&&t.__ads&&t.updateAds(t.__ads),t.asyncParams&&(t.startTime=t.asyncParams.startTime,t.getAdsCallback(t.asyncParams.id,t.asyncParams.callbackFn,t.asyncParams.timeout,t.asyncParams.size,t.asyncParams.data))},t}(window.amznads||{},document,window);p.tryGetAdsAsync(),window.amzn_ads=function(t){try{p.updateAds(t)}catch(t){}},window.amznads=p,window.aax_write=l,window.amznMatchCookie=m,window.aax_render_ad=function(t){if(t&&t.cmp&&""!=t.cmp&&"undefined"!=t.cmp&&m(t.cmp),t.passback)l(document,t.html);else{var e=t.slotSize;if(e){var n,r=e.indexOf("x"),a=e.substring(0,r),o=e.substring(r+1),i="amznad"+Math.round(1e6*Math.random());l(document,'<iframe id="'+i+'" width="'+a+'" height="'+o+'" src="javascript:\'\'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>');try{var c=(n=document.getElementById(i)).contentWindow||n.contentDocument;c.document&&(c=c.document),l(c,t.html);try{t.iid&&(document.write('<script type="text/javascript" src="'+u.CSM_JS+'"><\/script>'),document.write('<script type="text/javascript">'),document.write('  amzncsm.host="aax.amazon-adsystem.com";\n'),document.write('  amzncsm.rmC(document.getElementById("'+i+'"), "'+t.iid+'", window, document);'),document.write("<\/script>"),document.close())}catch(t){console&&console.log}}catch(t){n&&(n.style.display="none")}}else l(document,t.html)}}},function(t,e,n){t.exports=n(9)}]);
var AufBid=window.AufBid||{};AufBid.AmazonAdapter=(function(){var CALLBACK_TIMEOUT=800;function _g(token){var c=token.split('p').pop();return(0xE-Number(c)+0x1)*0x1/0x2;}
return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);this.useNewApi=this.manager.getConfig('hb_amazonV2');this.log('Amazon library V'+(this.useNewApi?'2':'1'),'warn');if(this.useNewApi&&!window.apstag||!this.useNewApi&&!window.amznads){this.disabled=true;return;}
if(this.useNewApi){apstag.init({pubID:this.options.accountId,adServer:'smart'});}else{if(this.debug&&location.hash.indexOf('amzn_debug_mode=1')<0){location.hash=(location.hash?location.hash+'&':'#')+'amzn_debug_mode=1';}
var callback=this.createCallback();PubSub.subscribe('ads.hb.amazon.callback.ready',callback.func);}},requestBids:function(){if(this.disabled){return;}
if(this.useNewApi){var config={slots:[],timeout:this.manager.callId?this.manager.timeout:CALLBACK_TIMEOUT};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var sizes=placement.size.split(',').map(function(size){return size.trim().split('x');});config.slots.push({slotID:formatId+'_'+placement.tag,sizes:sizes});},this);}}
var callback=this.createCallback();apstag.fetchBids(config,callback.func);}else{amznads.getAdsCallback(this.options.accountId,function(){PubSub.publish('ads.hb.amazon.callback.ready');});}},getBidsFromResponse:function(response){if(this.useNewApi){console.log(response);if(!response){this.logError('Empty response');return;}
if(response.count===0){this.log('No bid');return;}
response.forEach(function(rawBid){this.log(rawBid);},this);}else{for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var tokens=amznads.getTokens(placement.tag);if(!tokens){this.logError('Empty response');return;}
if(tokens.length===0){this.log('No bid - format '+formatId+' - placement '+placement.tag+' ('+placement.size+')');return;}
tokens.forEach(function(rawBid){this.manager.addBid({account:this,formatId:formatId,placementId:placement.tag,placementSize:placement.size,cpmRaw:_g(rawBid)},{creativeHTML:'<html>\n'
+'<head></head>\n'
+'<body style="margin : 0; padding: 0;">\n'
+'<script type="text/javascript">top.amznads.renderAd(document, "'+rawBid+'")</script>\n'
+'</div>\n'
+'</body>\n'
+'</html>',});},this);},this);}}}}});})();
var AufBid=window.AufBid||{};AufBid.RubiconAdapter=(function(){var ENDPOINT='https://fastlane.rubiconproject.com/a/api/fastlane.json';var SIZE_MAP={1:'468x60',2:'728x90',8:'120x600',9:'160x600',10:'300x600',14:'250x250',15:'300x250',16:'336x280',19:'300x100',31:'980x120',32:'250x360',33:'180x500',35:'980x150',37:'468x400',38:'930x180',43:'320x50',44:'300x50',48:'300x300',54:'300x1050',55:'970x90',57:'970x250',58:'1000x90',59:'320x80',60:'320x150',61:'1000x1000',65:'640x480',67:'320x480',68:'1800x1000',72:'320x320',73:'320x160',78:'980x240',79:'980x300',80:'980x400',83:'480x300',94:'970x310',96:'970x210',101:'480x320',102:'768x1024',103:'480x280',113:'1000x300',117:'320x100',125:'800x250',126:'200x600',146:'980x250'};var PSA_ERROR_CODES={'3':{reason:'Invalid request: missing parameter'},'10':{reason:'No ads in the rules file that passed targeting or were eligible to serve',consoleOnly:true},'15':{reason:'Referrer not allowed'},'16':{reason:'Rules file missing or identifiers not valid',extraInfos:true},'17':{reason:'User-agent blocked: suspected spider',consoleOnly:true},'18':{reason:'IP address blocked: suspected botnet',consoleOnly:true},'21':{reason:'Referrer blocked: suspected bad traffic',consoleOnly:true},'35':{reason:'Invalid account id',extraInfos:true},'38':{reason:'Invalid size id'},'48':{reason:'User opt-out from RTB',consoleOnly:true},'53':{reason:'No compatible ad',consoleOnly:true}};var _getPlacementsByZone=function(placements,formatIds){var activePlacements={};formatIds.forEach(function(formatId){if(placements[formatId]){placements[formatId].forEach(function(placement){var tag=placement.tag.split('-'),zoneId=tag[0],sizeId=tag[1];if(!activePlacements.hasOwnProperty(zoneId)){activePlacements[zoneId]={};}
if(activePlacements[zoneId].hasOwnProperty(formatId)){activePlacements[zoneId][formatId].sizes.push(sizeId);}else{activePlacements[zoneId][formatId]={sizes:[sizeId]};}});}});return activePlacements;};return extend(AufBid.AufAdapter,{bidTTL:300,requestBids:function(){if(!this.options.accountId){this.logError('Empty account_id');return;}
this.placementsByZone=_getPlacementsByZone(this.options.placements,this.manager.formatIds);for(var zoneId in this.placementsByZone){if(this.placementsByZone.hasOwnProperty(zoneId)){for(var formatId in this.placementsByZone[zoneId]){if(this.placementsByZone[zoneId].hasOwnProperty(formatId)){var ppos=this.manager.getFormatPosition(formatId);if(!ppos){ppos='btf';this.logError('Bad format position for '+formatId);}
var query={account_id:this.options.accountId,site_id:this.options.siteId,zone_id:zoneId,size_id:this.placementsByZone[zoneId][formatId].sizes[0],alt_size_ids:this.placementsByZone[zoneId][formatId].sizes.slice(1).join(',')||undefined,p_pos:ppos,rp_floor:'0.01',rp_secure:'1',p_screen_res:window.screen.width+'x'+window.screen.height,rand:Math.random(),rf:location.hostname.substr(location.hostname.indexOf('.')+1)};this.options.gdpr.applies=1;if(this.options.gdpr.applies){query.gdpr_consent=this.options.gdpr.consentString;query.gdpr=this.options.gdpr.applies;}
var src=ENDPOINT+'?'+this.manager.utils.getQueryString(query);var callback=this.createCallback(formatId,zoneId);this.manager.utils.ajax(src,callback.func,'',{withCredentials:true});}}}}},getBidsFromResponse:function(response,formatId){if(!response){return;}
var parsedResponse;try{parsedResponse=JSON.parse(response);}catch(e){if(response.toLowerCase().indexOf('adblock')<0){this.logError('Bad response parsing: '+response);}
return;}
if(!parsedResponse||parsedResponse.status!=='ok'){var logInfos='';var consoleOnly=false;var errorCode=PSA_ERROR_CODES[parsedResponse.error_code];if(errorCode){logInfos=errorCode.reason;consoleOnly=errorCode.consoleOnly;if(errorCode.extraInfos){logInfos+=(parsedResponse.site_id?' site_id='+parsedResponse.site_id:'')
+(parsedResponse.account_id?' account_id='+parsedResponse.account_id:'')
+(parsedResponse.zone_id?' zoneid='+parsedResponse.zone_id:'')
+(parsedResponse.size_id?' sizeid='+parsedResponse.size_id:'');}}
this.logError('Bad response'
+(parsedResponse.status?' - status '+parsedResponse.status:'')
+(parsedResponse.error_code?' - code '+parsedResponse.error_code:'')
+(parsedResponse.reason?' - reason '+parsedResponse.reason:'')
+' ('+(logInfos?logInfos:response.substr(0,100))+')',consoleOnly);return;}
parsedResponse.ads.forEach(function(rawBid){var placementId=parsedResponse.zone_id+'-'+parsedResponse.size_id;if(rawBid.status!=='ok'){if(PSA_ERROR_CODES[rawBid.error_code].consoleOnly){this.log('No bid');}else{this.logError('Bad response: '+rawBid.reason+' ['+rawBid.error_code+']');}
return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:SIZE_MAP[rawBid.size_id],cpmRaw:rawBid.cpm},{advertiserId:rawBid.advertiser,campaign:rawBid.campaign_id,creativeId:rawBid.impression_id,creativeHTML:'<html>\n'
+'<head></head>\n'
+'<body style="margin : 0; padding: 0;">\n'
+'<!-- Rubicon Project Ad Tag -->\n'
+'<div data-rp-impression-id="'+rawBid.impression_id+'">\n'
+'<script type="text/javascript">'+rawBid.script+'</script>\n'
+'</div>\n'
+'</body>\n'
+'</html>',deal:rawBid.deal,type:rawBid.type});},this);}});})();
var AufBid=window.AufBid||{};AufBid.Debug=(function(){var debug=function(manager,params){this.manager=manager;this.options=params||{};this.placeToggleButton();};debug.prototype={constructor:debug,tableOfContents:[],slots:[],getRenderedBid:function(id){var ret;var pid=id.split('_')[1];for(var bidder in this.bids){for(var formatId in this.bids[bidder]){for(var i=0,l=this.bids[bidder][formatId].length;i<l;++i){var bid=this.bids[bidder][formatId][i];if(bid.ad_server_pid.toString()===pid.toString()&&bid.rendered===1){ret=bid;break;}}}}
return ret;},parse:function(){var els=document.querySelectorAll('div[id^=sas_]');els.forEach(function(el){var sp=el.id.split('_');var classname='.'+sp[0]+'_FormatID_'+sp[1];if(window.getComputedStyle(document.querySelectorAll(classname)[0]).display!=='none'){this.slots.push({el:el,bid:this.getRenderedBid(el.id)});}},this);this.parsed=true;},placeLabels:function(){this.slots.forEach(function(slot){slot.el.style.position='relative';slot.el.style.minHeight='20px';slot.el.style.minWidth='20px';var label=this.getLabel(slot);slot.el.appendChild(label);},this);this.createTableOfContents();},getLabel:function(slot){var label=document.createElement('div');label.style.position='absolute';label.textContent=slot.el.id;label.style.top='0px';label.style.left='0px';label.style.background='red';label.style.padding='5px';label.style.color='white';label.style.display='block';label.id='label_for_'+slot.el.id;label.className='label_hb_placement';if(slot.bid){label.textContent+=' '+slot.bid.accountName+' ('+slot.bid.cpmFloored+')';label.style.background='#4CAF50';}else{label.textContent+=' other';}
return label;},createTableOfContents:function(){var table=document.createElement('div');table.id='hb-table-of-content';table.style.cursor='move';var liste=document.createElement('ul');table.appendChild(liste);this.slots.forEach(function(slot){var li=document.createElement('li');li.textContent=slot.el.id;li.style.cursor='pointer';if(slot.bid){li.textContent+=' '+slot.bid.accountName+' ('+slot.bid.bidderName+')';}else{li.textContent+=' direct';}
slot.el.style.transition='all 0.4s';li.onclick=function(){AufBid.Debug.Utils.scrollTo(document.body,document.getElementById(slot.el.id).offsetTop,600);};li.onmouseover=function(){slot.el.style.transform='scale(1.3)';};li.onmouseout=function(){slot.el.style.transform='scale(1)';};liste.appendChild(li);});table.style.position='fixed';table.style.top='100px';table.style.right='30px';table.style.zIndex='9999999';table.style.background='#607D8B';table.style.color='white';table.style.boxShadow='2px 2px 8px #666';table.style.borderRadius='2px';table.style.padding='10px';liste.style.color='inherit';liste.style.margin='0';liste.style.padding='0';document.body.appendChild(table);AufBid.Debug.Utils.makeDraggable('#'+table.id);},getToggleButton:function(){var button=document.createElement('button');button.textContent='toggle placements';button.style.position='fixed';button.style.top='65px';button.style.right='30px';button.style.zIndex=10000000;return button;},placeToggleButton:function(){var button=this.getToggleButton();var that=this;button.onclick=function(){that.parse();var labels=document.getElementsByClassName('label_hb_placement');if(labels.length===0){that.placeLabels();return;}
var display=labels[0].style.display==='block'?'none':'block';for(var i=0,l=labels.length;i<l;i++){labels[i].style.display=display;}};document.body.appendChild(button);},debug:function(){console.group('debug header bidding');console.group('bids');var allBids=[];for(var bidder in this.manager.bids){for(var formatId in this.manager.bids[bidder]){for(var i=0,l=this.manager.bids[bidder][formatId].length;i<l;i++){allBids.push(this.manager.bids[bidder][formatId][i]);}}}
console.group('available ('+allBids.length+')');console.table(allBids);console.groupEnd();var bookedBids=allBids.filter(function(bid){return bid.booked;});console.group('booked ('+bookedBids.length+')');console.table(bookedBids);console.groupEnd();var renderedBids=allBids.filter(function(bid){return bid.rendered;});console.group('rendered ('+renderedBids.length+')');console.table(renderedBids);console.groupEnd();console.groupEnd();console.groupEnd();}};return debug;})();AufBid.Debug.Utils={scrollTo:function(element,to,duration){if(duration<=0)return;var difference=to-element.scrollTop;var perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;if(element.scrollTop===to)return;window.scrollTo(element,to,duration-10);},10);},makeDraggable:function(elementSelector){var dragStartX,dragStartY;var objInitLeft,objInitTop;var inDrag=false;var dragTarget=document.querySelector(elementSelector);dragTarget.addEventListener('mousedown',function(e){inDrag=true;objInitLeft=dragTarget.offsetLeft;objInitTop=dragTarget.offsetTop;dragStartX=e.pageX;dragStartY=e.pageY;});document.addEventListener('mousemove',function(e){if(!inDrag){return;}
dragTarget.style.left=(objInitLeft+e.pageX-dragStartX)+'px';dragTarget.style.top=(objInitTop+e.pageY-dragStartY)+'px';});document.addEventListener('mouseup',function(){inDrag=false;});},domReady:function(callback){document.readyState==='interactive'||document.readyState==='complete'?callback():document.addEventListener('DOMContentLoaded',callback);}};
var AufBid=window.AufBid||{};AufBid.Utils=(function(){var utils=function(){};utils.prototype={constructor:utils,ajax:function(url,callback,data,options){var XDomainRequest=false,x;var method=options.method||(data?'POST':'GET');if(!window.XMLHttpRequest){XDomainRequest=true;}else{x=new window.XMLHttpRequest();if(x.responseType===undefined){XDomainRequest=true;}}
if(XDomainRequest){x=new window.XDomainRequest();x.onload=function(){callback(x.responseText,x,options);};x.onerror=function(){};x.ontimeout=function(){};x.onprogress=function(){};}else{x.onreadystatechange=handler;}
if(method==='GET'&&data){var urlInfo=this.parseURL(url);Object.assign(urlInfo.search,data);url=this.formatURL(urlInfo);}
x.open(method,url);if(!XDomainRequest){if(options.withCredentials){x.withCredentials=true;}
if(options.preflight){x.setRequestHeader('X-Requested-With','XMLHttpRequest');}
x.setRequestHeader('Content-Type',options.contentType||'text/plain');}
x.send(method==='POST'&&data);function handler(){if(x.readyState===4&&callback){callback(x.responseText,x,options);}}},parseURL:function(url){var parsed=document.createElement('a');parsed.href=decodeURIComponent(url);return{protocol:(parsed.protocol||'').replace(/:$/,''),hostname:parsed.hostname,port:+parsed.port,pathname:parsed.pathname,search:this.parseQS(parsed.search||''),hash:(parsed.hash||'').replace(/^#/,''),host:parsed.host};},formatURL:function(obj){return(obj.protocol||'http')+'://'+
(obj.host||obj.hostname+(obj.port?':'+obj.port:''))+
(obj.pathname||'')+(obj.search?'?'+this.formatQS(obj.search||''):'')+
(obj.hash?'#'+obj.hash:'');},formatQS:function(query){return Object.keys(query).map(function(k){return Array.isArray(query[k])?query[k].map(function(v){return k+'[]='+v;}).join('&'):k+'='+query[k];}).join('&');},getQueryString:function(query){return Object.keys(query).map(function(k){return k+'='+encodeURIComponent(query[k]);}).join('&');},parseQS:function(query){return!query?{}:query.replace(/^\?/,'').split('&').reduce(function(acc,criteria){var k=criteria.split('=')[0];var v=criteria.split('=')[1];if(/\[\]$/.test(k)){k=k.replace('[]','');acc[k]=acc[k]||[];acc[k].push(v);}else{acc[k]=v||'';}
return acc;});},getLocationHash:function(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;},getDocumentLocation:function(){return window.location.href.substring(0,300).split(/[?#]/)[0];},getGuid:function(){return Date.now()+''+Math.floor(Math.random()*1000);},createIframe:function(width,height){if(!width||!height){return;}
var iframe=document.createElement('iframe');iframe.setAttribute('scrolling','no');iframe.setAttribute('frameborder',0);iframe.setAttribute('width',width);iframe.setAttribute('height',height);iframe.style.border='none';iframe.marginWidth=0;iframe.topMargin=0;iframe.leftMargin=0;iframe.marginHeight=0;iframe.allowTransparency='true';iframe.sandbox='allow-forms allow-pointer-lock allow-same-origin allow-popups allow-modals allow-scripts';return iframe;},loadScript:function(url,callback,attributes){var script=document.createElement('script');script.type='text/javascript';script.async=true;script.src=url;if(typeof callback==='function'){script.onload=callback;}
for(var name in attributes){script.setAttribute(name,attributes[name]);}
var elt=document.getElementsByTagName('script')[0];elt.parentNode.insertBefore(script,elt);},loadPixel:function(url){if(!/^https:\/\//.test(url)){return false;}
var pixel=new Image();pixel.src=url;return true;},capitalizeFirstLetter:function(string){return string.charAt(0).toUpperCase()+string.slice(1);}};return utils;})();
var AufBid=window.AufBid||{};AufBid.Bid=(function(){var availableCurrencies=['EUR','USD','GBP'];var bid=function(params,extraInfos){if(!params.formatId){this.errorMsg='No format id';}
if(!params.formatName){this.errorMsg='No format name';}
if(!params.currency&&!params.account.currency){this.errorMsg='No currency';}
if(!params.placementId){this.errorMsg='No placement id';}
if(!params.placementSize){this.errorMsg='No placement size';}
if(!params.cpmRaw){this.errorMsg='No cpm '+params.cpmRaw;}
this.id=params.id;this.formatId=params.formatId;this.formatName=params.formatName;this.accountName=params.account.name;this.bidderName=params.account.bidder;this.currency=params.currency||params.account.currency;this.TTL=params.account.bidTTL;this.receivedTime=(new Date()).getTime();this.expirationDate=this.receivedTime+this.TTL*1000;this.placementId=params.placementId;this.placementSize=params.placementSize;this.cpmRaw=params.cpmRaw;this.late=params.late;this.adxCoeff=params.adxCoeff;this.position=params.position;this.rendered=false;this.booked=false;this.expired=false;if(availableCurrencies.indexOf(this.currency)===-1){this.errorMsg='Bad currency - '+this.currency;}
this.setExtraInfos(extraInfos);this.setCPMs(params.account.options.adjustment,params.account.options.discount);if(!this.parseSize()){this.errorMsg='Failed retrieving placement width & height';}
if(this.errorMsg){this.invalid=true;this.errorMsg='Invalid bid - '+this.errorMsg;return;}};bid.prototype={constructor:bid,parseSize:function(){if(this.placementWidth&&this.placementHeight){return true;}
if(!this.placementSize){return false;}
var sizes=this.placementSize.split('x');if(sizes.length===2){this.placementWidth=parseInt(sizes[0]);this.placementHeight=parseInt(sizes[1]);return true;}
return false;},isExpired:function(){return this.expirationDate<(new Date()).getTime();},isAlmostExpired:function(){return(this.expirationDate-(new Date()).getTime())/1000<this.TTL/3;},setExtraInfos:function(data){for(var key in data){this[key]=data[key];}},setCPMs:function(discrepancy,commission){this.cpmRawNet=this.applyRate(this.cpmRaw,commission);this.cpmNetEuros=this.convertInEuros(this.cpmRawNet,this.currency),this.cpmAdjusted=this.applyRate(this.cpmNetEuros,discrepancy);this.cpmFloored=this.floorCpm(this.cpmAdjusted);this.cpmFormatted=this.format4Digits(this.cpmFloored);var adxFloor=this.floorCpm(this.adxCoeff*this.cpmNetEuros);this.adxFloorFormatted=this.format4Digits(adxFloor);this.cpmNetEurosFormatted=this.format4Digits(this.cpmNetEuros);},convertInEuros:function(cpm,currency){var cpmEuros;switch(currency.toUpperCase()){case'USD':cpmEuros=cpm*0.814;break;case'GBP':cpmEuros=cpm*1.143;break;default:cpmEuros=cpm;}
return cpmEuros;},applyRate:function(cpm,rate){return cpm*(1-rate/100);},floorCpm:function(cpm){var cpmRounded=Math.floor(cpm*100)/100;if(cpmRounded>0&&cpmRounded<=0.15){return cpmRounded;}else if(cpmRounded<=5){return Math.floor(cpmRounded*20)/20;}else if(cpmRounded<=20){return Math.floor(cpmRounded*4)/4;}else if(cpmRounded<=50){return Math.floor(cpmRounded);}else if(cpmRounded<=100){return Math.floor(cpmRounded/5)*5;}else if(cpmRounded<=500){return Math.floor(cpmRounded/50)*50;}else if(cpmRounded<=1000){return Math.floor(cpmRounded/100)*100;}else if(cpmRounded>1000){return 1000;}else{return 0;}},format4Digits:function(cpm){if(afAd.isDFP()){return parseInt(cpm.toFixed(2).replace('.',''),10);}else{return('000'+cpm.toFixed(2).replace('.','')).slice(-4);}}};return bid;})();
var AufBid=window.AufBid||{};AufBid.Manager=(function(){var LOAD_TIMEOUT=1000;var MAX_HEIGHT_BANNER_ATF=250;var MAX_HEIGHT_BANNER_ATF_SMALL=90;var FORMAT_ID_BANNER_ATF_SMALL=36513;var manager=function(params){this.callback=params.callback||window.afAd&&afAd.load&&afAd.load.bind(afAd)||function(){};if(!params.data||params.data.accounts.length===0){this.disabled=true;this.callback();}
this.options=params.data;this.isMobile=params.isMobile;this.timeout=params.timeout||LOAD_TIMEOUT;this.init();};manager.prototype={constructor:manager,accounts:{},bids:{},formats:{},formatIds:[],disabled:false,late:false,callId:0,init:function(){this.utils=new AufBid.Utils();this.logger=new AufBid.Logger();if(!window.afAd){this.logError('Failed retrieving adserver');return;}
if(afAd.isDFP()){this.options.accounts.forEach(function(account){for(var formatId in account.placements){if(afAd.getRealFormatId(formatId)){account.placements[afAd.getRealFormatId(formatId)]=account.placements[formatId];delete(account.placements[formatId]);}}},this);for(var formatId in this.options.formats){if(afAd.getRealFormatId(formatId)){this.options.formats[afAd.getRealFormatId(formatId)]=this.options.formats[formatId];delete(this.options.formats[formatId]);}}}
this.formats=this.options.formats;this.initFormats();this.forced=this.isForced();this.adjustAdTagging();this.loadAccounts();this.requestBids();if(this.accounts&&this.formatIds){setTimeout(function(){this.callback();}.bind(this),this.timeout);}else{this.callback();}
this.initListeners();},logError:function(message,category){this.logger.logError(message,(category||'manager'));},initListeners:function(){afAd.subscribe('ad.call',function(message,data){if(data.formatIds=='15134'||data.formatIds=='15135')return;var formatIds=data.formatIds.toString().split(',');if(this.callId===1){for(var format in this.formats){if(this.formats.hasOwnProperty(format)&&this.formats[format].asyncOnly){formatIds.push(format);}}}
this.postAdServerCall(formatIds);}.bind(this));PubSub.subscribeOnce('ad.block.detect',function(msg,data){this.adblocker=data.status?true:false;this.logger.logConsole('Asynchronous adblocker detection: adblocker '+(this.adblocker?'enabled':'disabled'));}.bind(this));},isForced:function(){return this.getConfig('hb_forced')||afSession.isPaid();},initFormats:function(formatIds){this.formatIds=formatIds||window.sas_formatIds&&sas_formatIds.split(',')||Object.keys(this.formats);this.formatIds=this.formatIds.filter(function(formatId){return(typeof this.formats[formatId]!=='undefined');},this);this.logger.logConsole('Init formats '+this.formatIds.toString());},adjustAdTagging:function(){if(this.forced){window.sas_formatIds=this.formatIds.toString();}
var hasBannerAtfSmall;if(afAd.isDFP()){hasBannerAtfSmall=afAd.hasFormat(afAd.getRealFormatId(FORMAT_ID_BANNER_ATF_SMALL));}else{hasBannerAtfSmall=afAd.hasFormat(FORMAT_ID_BANNER_ATF_SMALL.toString());}
if(this.forced||hasBannerAtfSmall){var style=document.createElement('style');style.type='text/css';style.innerHTML='#precontent { max-height: '+(hasBannerAtfSmall?MAX_HEIGHT_BANNER_ATF_SMALL:MAX_HEIGHT_BANNER_ATF)+'px; }';document.getElementsByTagName('head')[0].appendChild(style);}},loadAccounts:function(){var accountsTest=this.getConfig('hb_accountsTest');var accountsDisabled=this.getConfig('hb_accountsDisabled');var biddersTest=this.getConfig('hb_biddersTest');var biddersDisabled=this.getConfig('hb_biddersDisabled');this.options.accounts.forEach(function(params){if(accountsTest&&accountsTest.indexOf(params.name)<0||accountsDisabled.indexOf(params.name)>=0||biddersTest&&biddersTest.indexOf(params.bidder)<0||biddersDisabled.indexOf(params.bidder)>=0){return;}
var account=this.createAccount(params);if(account){this.accounts[params.name]=account;}},this);},createAccount:function(params){var bidderName=this.utils.capitalizeFirstLetter(params.bidder);if(!window.AufBid[bidderName+'Adapter']){this.logError('Failed loading account','account '+bidderName);return;}
return new AufBid[bidderName+'Adapter'](this,params);},getAccount:function(name){if(!this.accounts[name]){this.logError('Failed retrieving account ','account '+name);return;}
return this.accounts[name];},requestBids:function(){for(var accountName in this.accounts){if(this.accounts.hasOwnProperty(accountName)){var account=this.accounts[accountName];account.setPlacements(this.formatIds);if(account.hasPlacements()){this.logger.logConsole('['+accountName+'] Request bids for formats '+this.formatIds.toString());account.requestBids();}else{}}}
this.callId++;},parseTarget:function(target){target=JSON.parse(target);var parsedTarget='';for(var elemIndex in target){parsedTarget+=elemIndex+'='+target[elemIndex].join()+';';}
return parsedTarget;},render:function(params){params=params||{};var logInfos=' - format '+params.formatId;try{this.logger.logConsole('Render bid format '+params.formatId);if(params.target.indexOf('%')>=0){params.target=decodeURIComponent(params.target);}
var bidIdKey='bid_'+this.formats[params.formatId].name+'_id';var bidId=this.getAdTargetingKeywordValue(params.target,bidIdKey,'i');if(!bidId){this.logError('No render: missing bid ID'+logInfos,'HB108');return;}
var bid=this.getBid(bidId);if(!bid){this.logError('No render: bid does not exist anymore'+logInfos,'HB101');return;}
logInfos+=' - account '+bid.accountName
+' - placement '+bid.placementId;if(bid.formatId!==params.formatId.toString()){this.logError('No render: format mismatch - expected format '+params.formatId+logInfos,'HB112');return;}else if(bid.rendered){this.logError('No render: bid already rendered'+logInfos,'HB105');return;}else if(!bid.booked){this.logError('No render: bid not booked'+logInfos,'HB107');return;}
bid.renderTime=(new Date()).getTime();bid.rendered=true;var containerIdKey='tagid';var containerId=this.getAdTargetingKeywordValue(params.target,containerIdKey,'t');var placeholderPrefix=afAd.options.placeholderPrefix||'sas_';bid.containerId=(containerId?containerId:placeholderPrefix+bid.formatId);bid.renderParams=params;this.logger.logRenderedBid(bid,true);var account=this.getAccount(bid.accountName);if(!account){this.logError('Account not found'+logInfos+' - expected account '+bid.accountName,'HB110');return;}
if(!account.render(bid)){this.logError('No render: error while rendering, on account '+bid.accountName+' for size '+bid.placementSize,'HB111');}}catch(e){this.logError('Fatal error while rendering : '+e.message+' - '+logInfos,'HB100');}},addBid:function(params,extraInfos){var position=this.getFormatPosition(params.formatId);var bid=new AufBid.Bid({account:params.account,id:this.utils.getGuid().toString(),formatId:params.formatId,formatName:this.formats[params.formatId].name,currency:params.currency,adxCoeff:this.getAdXMultiplicator(position),placementId:params.placementId,placementSize:params.placementSize,cpmRaw:params.cpmRaw,position:position,late:this.late},extraInfos);if(bid.invalid){this.logError(bid.errorMsg,'account '+bid.accountName);this.logger.logConsole(params,'table');return;}
this.storeBid(bid);},storeBid:function(bid){this.logger.logConsole('['+bid.accountName+'] New bid received'
+' - id '+bid.id
+' - format '+bid.formatId
+' - CPM '+(Math.floor(bid.cpmAdjusted*100)/100)+'€'
+' - TTL '+bid.TTL+'s','count');this.bids[bid.accountName]=this.bids[bid.accountName]||{};this.bids[bid.accountName][bid.formatId]=this.bids[bid.accountName][bid.formatId]||[];this.bids[bid.accountName][bid.formatId].push(bid);},getFormatPosition:function(formatId){return this.formats[formatId].position},getBid:function(bidId){if(!bidId){return;}
for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)){for(var formatId in this.bids[accountName]){if(this.bids[accountName].hasOwnProperty(formatId)){for(var i=0,l=this.bids[accountName][formatId].length;i<l;i++){var bid=this.bids[accountName][formatId][i];if(bid.id===bidId){return bid;}}}}}}
return null;},getBestAvailableBid:function(formatId){var maxBid;for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)&&this.bids[accountName][formatId]){this.bids[accountName][formatId].forEach(function(bid){if(!bid.rendered&&!bid.booked&&!bid.isAlmostExpired()&&(!maxBid||bid.cpmAdjusted>maxBid.cpmAdjusted)){maxBid=bid;}});}}
return maxBid;},cleanExpiredBids:function(){this.logger.logConsole('Clean expired bids');for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)){for(var formatId in this.bids[accountName]){if(this.bids[accountName].hasOwnProperty(formatId)){var formatBucket=this.bids[accountName][formatId];if(formatBucket&&formatBucket.length>0){for(var i=formatBucket.length-1;i>=0;i--){var bid=formatBucket[i];if(bid.isExpired()&&!bid.booked&&!bid.rendered){this.logger.logConsole('['+bid.accountName+'] Clean expired bid'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted,'info');this.bids[accountName][formatId].splice(i,1);}}}}}}}},getAdTargetingKeywordsFormatted:function(params){var keywords=this.getAdTargetingKeywords(params);var arr=[];for(var key in keywords){if(keywords.hasOwnProperty(key)){arr.push(key+(keywords[key]?'='+keywords[key]:''));}}
return';'+arr.join(';')+';';},getAdTargetingKeywords:function(params){var keywords={};var bidsBooked=[];this.logger.logConsole('Book bids for formats '+this.formatIds.toString());this.formatIds.forEach(function(formatId){var bid=this.getBestAvailableBid(formatId);if(bid){this.logger.logConsole('['+bid.accountName+'] Book bid'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted);bid.booked=true;bid.bookedTime=(new Date()).getTime();bidsBooked.push(bid);var bidId=bid.id+'i';var cpmFormatted=bid.cpmFormatted+'c';var cpmNetEurosFormatted=bid.cpmNetEurosFormatted+'c';if(afAd.isDFP()){for(var placeholderId in params.placeholders){if(formatId===afAd.getFormatId(placeholderId)){afAd.updateKeyword('bid_'+bid.formatName+'_id',bidId,placeholderId);afAd.updateKeyword('hb_bid_account',bid.accountName,placeholderId);afAd.updateKeyword('hb_bid_cpm',cpmFormatted,placeholderId);afAd.updateKeyword('hb_bid_cpm_neteuros',cpmNetEurosFormatted,placeholderId);afAd.updateKeyword('hb_bid_size',bid.placementSize+'s',placeholderId);var HB_BID_FORMATS={'300_atf':'rectangle_atf','300_mtf':'rectangle_mtf','300_mtf_2':'rectangle_mtf_2','300_mtf_3':'rectangle_mtf_3','300_btf':'rectangle_btf','300_diapodynamic':'rectangle_dynamic','sitebar_left':'skyscraper_left','sitebar_right':'skyscraper_right',};var hbBidFormatId=HB_BID_FORMATS[formatId]||formatId;afAd.updateKeyword('hb_bid_format',hbBidFormatId,placeholderId);afAd.updateKeyword('hb_bid_format_unified',formatId,placeholderId);afAd.updateKeyword('adx_floor',bid.adxFloorFormatted+'c',placeholderId);if(!afAd.findSize(bid.placementSize,formatId)){this.logError('Bad sizes mapping '+bid.placementSize+' for '+formatId,'account '+bid.accountName);}}}}else{keywords['bid_'+bid.formatName+'_cpm']=cpmFormatted;keywords['bid_'+bid.formatName+'_cpm_neteuros']=cpmNetEurosFormatted;keywords['bid_'+bid.formatName+'_id']=bidId;var cpmAdjusted=(Math.round(bid.cpmAdjusted*100)/100).toString();cpmAdjusted=cpmAdjusted.replace('.',',');keywords['bidlog_'+bid.accountName+'_'+bid.formatName]=cpmAdjusted;}}else{this.logger.logConsole('No bid available for '+this.formats[formatId].name+' format');}},this);if(Object.keys(keywords).length===0){this.logger.logConsole('No bid booked for this ad call','warn');}
if(this.forced&&!afAd.isDFP()){keywords['hb']='forced';}
this.logger.logBookedBids(bidsBooked,true);return keywords;},cleanAdTargetingKeywords:function(params){if(afAd.isDFP()){for(var placeholderId in params.placeholders){var slot=afAd.getSlot(placeholderId);if(slot){slot.getTargetingKeys().forEach(function(key){if(key.indexOf('hb')!==-1||key.indexOf('bid')!==-1||key.indexOf('adx_')!==-1){afAd.removeKeywords(key,placeholderId);}},this);}}}else{params.target=params.target.replace(/bid_[a-z0-9_]+_id=[0-9]+i;?/gi,'');params.target=params.target.replace(/bid_[a-z0-9_]+_cpm=[0-9]+c;?/gi,'');params.target=params.target.replace(/bidlog_[a-z0-9_]+=[0-9]+(,[0-9]+)?;?/gi,'');params.target=params.target.replace(/hb=forced;?/gi,'');}
return params.target;},preAdServerCall:function(params){if(this.disabled){return params.target;}
this.logger.logConsole('Pre ad server call');this.initFormats(params.formatIds);this.cleanExpiredBids();this.late=true;this.logger.logAvailableBids(this.bids,true);params.target=params.target||sas_target;params.target=this.cleanAdTargetingKeywords(params);params.target+=this.getAdTargetingKeywordsFormatted(params);return params.target;},postAdServerCall:function(formatIds){this.logger.logConsole('Post ad server call');this.initFormats(formatIds);this.cleanExpiredBids();this.late=false;this.logger.logAvailableBids(this.bids);setTimeout(function(){this.requestBids()}.bind(this),1000);},getAdTargetingKeywordValue:function(target,key,suffix){var regex=new RegExp('(?:;|^)'+key+'=([^;]*)'+(suffix?suffix:'')+';','gi');var matches=regex.exec(target);return(matches&&matches.length>0?matches[1]:'');},getAdXMultiplicator:function(formatPosition){var segment=afSession.getSegment(),domainName=top.document.domain,bestValue,bestValueMap={aufeminin:{ATF:1.95,MTF:1.95,BTF:1.75,},enfemenino:1.75,alfemminile:2.05,gofeminin:{ATF:1.95,MTF:2.05,BTF:1.95,},netmums:{ATF:2.05,MTF:1.95,BTF:2.15,},marmiton_desktop:2.05,marmiton_mobile:{ATF:2.15,MTF:2.15,BTF:1.85,},other:{ATF:2.15,MTF:1.95,BTF:2.15,}}
if(domainName.indexOf('aufeminin')!==-1){bestValue=bestValueMap.aufeminin[formatPosition];}else if(domainName.indexOf('alfemminile')!==-1){bestValue=bestValueMap.alfemminile;}else if(domainName.indexOf('enfemenino')!==-1){bestValue=bestValueMap.enfemenino;}else if(domainName.indexOf('netmums')!==-1){bestValue=bestValueMap.netmums[formatPosition];}else if(domainName.indexOf('gofeminin')!==-1){bestValue=bestValueMap.gofeminin[formatPosition];}else if(domainName.indexOf('marmiton')!==-1){bestValue=this.isMobile?bestValueMap.marmiton_mobile[formatPosition]:bestValueMap.marmiton_desktop;}else{bestValue=bestValueMap.other[formatPosition];}
var adxSegmentCoeff={0:1,1:bestValue-0.20,2:bestValue-0.15,3:bestValue-0.10,4:bestValue-0.05,5:bestValue,6:bestValue+0.05,7:bestValue+0.10,8:bestValue+0.15,9:bestValue+0.20}
if(!adxSegmentCoeff[segment]){this.logError('Invalid segment provided : '+segment);return null;}else{return Number(adxSegmentCoeff[segment].toFixed(2));}},getConfig:function(key){if(!this.hashs){this.hashs=this.utils.getLocationHash();}
return this.hashs[key]||window.localStorage&&localStorage.getItem(key)||'';},debug:function(){if(!AufBid.Debug){this.logger.logConsole('debug not available','warn');return;}
if(!this.debugger){this.debugger=new AufBid.Debug(this);}
this.debugger.debug();},setVerbose:function(enabled){this.logger.setVerbose(enabled);}};return manager;})();
function defclass(prototype){var constructor=prototype.hasOwnProperty('constructor')?prototype.constructor:function(){prototype.constructor.apply(this,arguments);};constructor.prototype=prototype;return constructor;}
function extend(constructor,keys){var prototype=Object.create(constructor.prototype);for(var key in keys){prototype[key]=keys[key];}
prototype.super=constructor.prototype;return defclass(prototype);}
var AufAds=window.AufAds||{};AufAds.AufAdserver=(function(){var AD_TECH_DFP='DFP';var AD_TECH_ONET='AdTech';var AD_TECH_SMART='SmartAdServer';var AD_TECH_STROER='DFP-Stroer';var REFRESH_DELAY=5000;var REFRESH_DELAY_MAX=10000;var REFRESH_DELAY_PAID=1000;var VERSION='1.2.4';return defclass({adblock:false,version:VERSION,constructor:function(params){this.options=params||{};this.name=params.name;this.initLogger();this.log('initialize adserver');this.detectAdTech();this.initPlugins();this.initListeners();this.initFormats(params);},isDFP:function(){return this.name==='dfp';},isOnet:function(){return this.name==='onet';},isSmart:function(){return this.name==='smart';},isStroer:function(){return this.name==='stroer';},detectAdTech:function(){if(!this.adTech){if(this.isSmart()){this.adTech=AD_TECH_SMART;}else if(this.isStroer()){this.adTech=AD_TECH_STROER;}else if(this.isOnet()){this.adTech=AD_TECH_ONET;}else if(this.isDFP()){this.adTech=AD_TECH_DFP;}else{this.logError('Unknown Ad Tech');this.adTech='Unknown';}}
return this.adTech;},getPlaceholderPrefix:function(){return this.options.placeholderPrefix;},getWrapperPrefix:function(){return this.options.wrapperPrefix;},parseFormatId:function(formatIdList){var defaultFormatId=0;var formatIdListJSON;try{formatIdListJSON=JSON.parse(formatIdList);}catch(e){formatIdListJSON=formatIdList;}
if(typeof formatIdListJSON==='object'){var adTechs=Object.keys(formatIdListJSON);if(adTechs.length===0){return defaultFormatId;}
if(formatIdListJSON.hasOwnProperty(this.adTech)){return formatIdListJSON[this.adTech];}else{for(var i=0;i<adTechs.length;i++){var adTech=adTechs[i];if(window.aufAdtechParams&&aufAdtechParams.hasOwnProperty(adTech)){if(!aufAdtechParams[adTech].disabled){this.logError('Ad Tech should be disabled: '+adTech);}}else{this.logError('Unknown Ad Tech for Format Id: '+adTech);}}
return defaultFormatId;}}else{this.logError('Unknown Format Id');return defaultFormatId;}},initLogger:function(){this.logger=new AufAds.Logger();},log:function(message,logType){this.logger.logConsole('['+this.name+'] '+message,logType);},logError:function(message,category,consoleOnly){this.logger.logError(message,'[v'+this.version+'] adserver '+this.name+(category?' - '+category:''),consoleOnly);},initPlugins:function(){if(AufAds.Focus){AufAds.Focus.init();}
if(AufAds.AufSkin){this.aufSkin=new AufAds.AufSkin();}},renderSkin:function(conf){if(!this.aufSkin){this.logError('Failed rendering - skin plugin not available');return;}
return this.aufSkin.render(conf);},initListeners:function(){PubSub.subscribeOnce('ad.block.detect',function(msg,data){this.adblock=data.status;}.bind(this));},subscribe:function(event,callback){PubSub.subscribe(event,callback);},publish:function(event,data){PubSub.publish(event,data);},subscribeEvent:function(eventName,callback){this.logError('OLD subscribeEvent is used - '+eventName);this.subscribe(eventName,callback);},publishEvent:function(eventName,response){this.logError('OLD publishEvent is used - '+eventName);this.publish(eventName,response);},hasFormat:function(formatId){return(','+sas_formatIds+',').indexOf(','+formatId+',')!==-1;},hiddenFormats:{},isHiddenFormat:function(formatId){return this.hiddenFormats[formatId];},initFormats:function(params){if(params.placeholders){for(var formatId in params.placeholders){if(params.placeholders.hasOwnProperty(formatId)){var placeholder=params.placeholders[formatId];if(placeholder.source==='paid'&&!afSession.isPaid()||placeholder.source==='organic'&&afSession.isPaid()||placeholder.screenWidthMin&&af_windowSize().w<placeholder.screenWidthMin||placeholder.segments&&placeholder.segments.indexOf(afSession.getSegment())===-1){sas_formatIds=','+sas_formatIds+',';sas_formatIds=sas_formatIds.replace(','+formatId+',',',');sas_formatIds=sas_formatIds.substring(1,sas_formatIds.length-1);this.hiddenFormats[formatId]=true;}else if(placeholder.hiddenParentDivId){af_addEvent(window,'load',function(hiddenParentDivId){var adParentDiv=document.getElementById(hiddenParentDivId);if(adParentDiv){adParentDiv.classList.remove('af-hidden');}else{this.logError('Hidden parent div is not in the DOM '+hiddenParentDivId);}}.bind(this,placeholder.hiddenParentDivId));}}}}},placeholders:{},formatsInstances:{},createPlaceholder:function(formatId,params){params=params||{};var formatIdInstance=formatId;if(this.formatsInstances[formatId]){this.formatsInstances[formatId]++;formatIdInstance+='_'+this.formatsInstances[formatId];}else{this.formatsInstances[formatId]=1;}
var placeholderId=this.getPlaceholderPrefix()+formatIdInstance;var placeholder=document.createElement('div');placeholder.id=placeholderId;var wrapper;if(!params.noWrapper){var wrapperId=this.getWrapperPrefix()+formatIdInstance;if(!afAd.isSmart()){wrapperId+='_wrapper';}
wrapper=document.createElement('div');wrapper.classList.add(wrapperId);wrapper.id=wrapperId;wrapper.appendChild(placeholder);}
var mainPlaceholder=(wrapper||placeholder);if(params.isCentered){mainPlaceholder.classList.add('af-banner');}
if(params.extraClasses){params.extraClasses.forEach(function(extraClass){mainPlaceholder.classList.add(extraClass);},this);}
if(params.adLabel){var adLabel=document.createElement('div');adLabel.classList.add('adLabel');adLabel.style.backgroundImage='url("'+params.adLabel+'")';mainPlaceholder.appendChild(adLabel);}
if(params.container){if(params.mode==='inside'){params.container.appendChild(mainPlaceholder);}else if(params.mode==='before'){params.container.parentNode.insertBefore(mainPlaceholder,params.container);}else if(params.mode==='after'){params.container.parentNode.insertBefore(mainPlaceholder,params.container.nextSibling);}else{this.logError('Create placeholder container without mode');return;}}
else{var currentScript=document.currentScript;if(!currentScript){var scripts=document.getElementsByTagName('script');currentScript=scripts[scripts.length-1];}
currentScript.parentNode.insertBefore(mainPlaceholder,currentScript);}
this.placeholders[placeholderId]={formatId:formatId,formatIdInstance:formatIdInstance,id:placeholderId,wrapper:mainPlaceholder};return this.placeholders[placeholderId];},render:function(formatId,placeholderId,params){if(params){this.logError('Render is not migrated');}else if(typeof placeholderId==='object'){params=placeholderId;}else{params={};}
var placeholder;if(params.autoCreate){placeholder=this.createPlaceholder(formatId,params.createParams);}
var tagId=placeholder?placeholder.id:(typeof placeholderId==='string'?placeholderId:'');if(params&&params.hasRefresh){if(!tagId){params.refreshParams=params.refreshParams||{};params.refreshParams.isVisibilityTestOn=false;this.logError('Deactivate Visibility Test');}
var afRefreshAds=new AufAds.Refresh();afRefreshAds.init(formatId,tagId,params.refreshParams);}
return placeholder;},preAdServerCall:function(formatIds,placeholders){if(window.afSession){afSession.updateWave();}
if(window.aufbidjs){var aufbidPreAdServerCallParams={formatIds:formatIds.toString().split(','),target:sas_target};if(placeholders){aufbidPreAdServerCallParams.placeholders=placeholders;}
sas_target=aufbidjs.preAdServerCall(aufbidPreAdServerCallParams);}
return sas_target;},postAdServerCall:function(formatIds){this.publish('ad.call',{formatIds:formatIds});},disableRefresh:function(){this.refreshDisabled=true;},enableRefresh:function(){this.refreshDisabled=false;},hasRefreshEnabled:function(){return(!this.refreshDisabled)&&((typeof window.top.af_stopRefreshAds!=='undefined')?!window.top.af_stopRefreshAds:true);},refreshedFormats:{},refreshAds:function(params){if(!this.hasRefreshEnabled()&&!params.isFirstCall){return false;}
this.log('refresh '+(params.formatIds||'all'));params.formatIds=params.formatIds?params.formatIds.toString():sas_formatIds;if(!this.refreshedFormats[params.formatIds]) {this.refreshedFormats[params.formatIds]={canRefresh:true,delayMax:REFRESH_DELAY_MAX,ids:params.formatIds};}
if(!this.refreshedFormats[params.formatIds].canRefresh){return;}
this.refreshedFormats[params.formatIds].canRefresh=false;var defaultDelay=(afSession.isPaid()?REFRESH_DELAY_PAID:REFRESH_DELAY);this.refreshedFormats[params.formatIds].delay=(!isNaN(params.delay)?params.delay:defaultDelay);if(this.isSmart()){this.callMaxTimeout(params.formatIds);}else{this.callVisibleTimeout(params.formatIds);}
if(params.tagId){this.refreshedFormats[params.formatIds].tagIds=this.refreshedFormats[params.formatIds].tagIds||{};this.refreshedFormats[params.formatIds].tagIds[params.tagId]=true;}
sas_target+=(params.extraTarget?';'+params.extraTarget:'');sas_target=sas_target.replace(/tagid=([^;]*);/g,'');sas_target+=params.tagId?';tagid='+params.tagId+'t;':'';sas_target=sas_target.replace(';new_visitor=1','').replace(';new_ref','').replace(';new_visit','').replace(';new_page','');sas_target=sas_target.replace('ajax=0','').replace('ajax=1','')+';ajax=1';sas_target=sas_target.replace(/;+/g,';');return true;},callVisibleTimeout:function(formatIds){var format=this.refreshedFormats[formatIds];if(!format||format.canRefresh||format.timeout){return;}
this.clearMaxTimeout(formatIds);format.timeout=setTimeout(function(){format.canRefresh=true;format.timeout=null;},format.delay);},clearVisibleTimeout:function(formatIds){if(!this.refreshedFormats[formatIds]){return;}
clearTimeout(this.refreshedFormats[formatIds].timeout);this.refreshedFormats[formatIds].timeout=null;},callMaxTimeout:function(formatIds){var format=this.refreshedFormats[formatIds];if(!format||format.canRefresh||format.timeoutMax){return;}
format.timeoutMax=setTimeout(function(){format.canRefresh=true;this.clearVisibleTimeout(formatIds);if(this.isSmart()){var isOneCall=(formatIds&&formatIds.indexOf(',')>0);if(!isOneCall||(window.sas_manager&&sas_manager.formats&&Object.keys(sas_manager.formats).length>0)){this.logError('Refresh max timeout reached for '+formatIds);}}
format.timeoutMax=null;}.bind(this),format.delayMax);},clearMaxTimeout:function(formatIds){if(!this.refreshedFormats[formatIds]){return;}
clearTimeout(this.refreshedFormats[formatIds].timeoutMax);this.refreshedFormats[formatIds].timeoutMax=null;},addKeyword:function(key,value){if(key&&!((key==='utm_source'||key==='utm_medium'||key==='utm_campaign')&&!value)){sas_target=this.cleanKeywords(';'+sas_target+';'+key+'='+value+';');}
return sas_target;},removeKeywords:function(key){if(key){var regex=new RegExp('(^|\;)'+key+'[^\;]*($|)','gi');sas_target=this.cleanKeywords(sas_target.replace(regex,';'));}
return sas_target;},updateKeyword:function(key,value){this.removeKeywords(key);this.addKeyword(key,value);return sas_target;},cleanKeywords:function(keywords){return keywords.replace(/;+/g,';');},debug:function(){this.log('debug is not implemented for this adserver');},showPlaceholder:function(formatId,params){this.logError('showPlaceholder should not be used');if(!params||params.length===0){return;}
if(params.source==='paid'&&!afSession.isPaid()||params.source==='organic'&&afSession.isPaid()||params.screenWidthMin&&af_windowSize().w<params.screenWidthMin||params.segments&&params.segments.indexOf(afSession.getSegment())===-1){sas_formatIds=','+sas_formatIds+',';sas_formatIds=sas_formatIds.replace(','+formatId+',',',');sas_formatIds=sas_formatIds.substring(1,sas_formatIds.length-1);}else if(params.hiddenParentDivId){af_addEvent(window,'load',function(){var adParentDiv=document.getElementById(params.hiddenParentDivId);adParentDiv.classList.remove('af-hidden');});}}});})();
var AufAds=window.AufAds||{};AufAds.DFPAdserver=(function(){var PLACEHOLDER_PREFIX='div-gpt-ad-';var WRAPPER_PREFIX='div-gpt-ad-';var MAX_RETRIES=20;var FORMATS_MAPPING_SMART_DFP={117:'banner_atf',36513:'banner_atf_small',3243:'banner_btf',12:'300_atf',3:'300_mtf',5222:'300_mtf_2',20442:'300_mtf_3',9888:'300_btf',1:'300_diapodynamic',16863:'300_diapodynamic',2357:'300_newsletter',15132:'sitebar_left',118:'sitebar_right',858:'native_recipe_center',38565:'native_shopping',28253:'native_seealso',18052:'native_block_left',18053:'native_block_right',25641:'inread',5:'dhtml',300:'',6965:'',11083:'',21150:'',21453:'',46728:'',55014:''};var PAGE_MAPPING_SMART_DFP_DEFAULT='others';var PAGE_MAPPING_SMART_DFP={19197:'homepage',874212:'expert_club',20215:'recipes',25606:'recipes',84252:'recipes',19216:'recipes',90484:'recipes',79607:'recipes',79606:'recipes',19220:'search',325673:'newsletter',325674:'newsletter',326291:'newsletter'};var PAGE_MAPPING_CONTENT_MARKETING_DEFAULT='others';return extend(AufAds.AufAdserver,{getRealFormatId:function(formatId){if(/^\d+$/.test(formatId)){if(!FORMATS_MAPPING_SMART_DFP[formatId]){if(!FORMATS_MAPPING_SMART_DFP.hasOwnProperty(formatId)){this.logError('Smart formatId is not mapped: '+formatId);}
return;}
return FORMATS_MAPPING_SMART_DFP[formatId];}else{return formatId;}},getRealFormatIds:function(formatIds){if(!formatIds){return'';}
var realFormatIds='';formatIds.split(',').forEach(function(formatId){var realFormatId=this.getRealFormatId(formatId);if(realFormatId){realFormatIds+=(','+realFormatId);}},this);if(realFormatIds.length>0){realFormatIds=realFormatIds.substring(1);}
return realFormatIds;},getRealPageId:function(){if(!window.sas_pageId||!(sas_pageId in PAGE_MAPPING_SMART_DFP)){return PAGE_MAPPING_SMART_DFP_DEFAULT;}
return PAGE_MAPPING_SMART_DFP[sas_pageId];},constructor:function(params){params=params||{};params.name='dfp';params.placeholderPrefix=PLACEHOLDER_PREFIX;params.wrapperPrefix=WRAPPER_PREFIX;window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];this.super.constructor.call(this,params);window.sas_formatIds=this.getRealFormatIds(sas_formatIds);this.initGPT();af_addEvent(window,'load',this.onLoad.bind(this));},initListeners:function(){this.super.initListeners.call(this);googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',function(event){var slotElementId=event.slot.getSlotElementId();if(slotElementId.indexOf('native')!==-1){var slotIframe=document.getElementById(slotElementId).querySelectorAll('iframe')[0];if(slotIframe){slotIframe.style.width='100%';}}
if(!event.isEmpty){this.log('slot has been rendered on '+slotElementId+' ('+event.size.join('x')+')');}}.bind(this));}.bind(this));},load:function(){if(this.loaded){return;}
this.loaded=true;this.log('load library');this.super.addKeyword('url',window.location.pathname);sas_target=this.cleanKeywords(sas_target);var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='https://www.googletagservices.com/tag/js/gpt.js';var elt=document.getElementsByTagName('script')[0];elt.parentNode.insertBefore(s,elt);},initGPT:function(){googletag.cmd.push(function(){this.log('initialize library');googletag.pubads().enableSingleRequest();googletag.pubads().disableInitialLoad();googletag.pubads().collapseEmptyDivs();googletag.enableServices();}.bind(this));},defineSlot:function(formatId,sizes,placeholderId){if(!formatId){this.logError('Slot defined without formatId');return false;}
if(!sizes||sizes.length===0){this.logError('Slot defined without sizes: '+formatId+' - '+placeholderId);return false;}
var adUnitPath;if(window.aufbidjs&&aufbidjs.isForced()){adUnitPath=this.options.adUnitPathHbForced+'/'+PAGE_MAPPING_CONTENT_MARKETING_DEFAULT;}else{var realPageId=this.getRealPageId();if(!realPageId){this.logError('Organic call without page id');return;}
adUnitPath=this.options.adUnitPath+'/'+realPageId;}
this.placeholders[placeholderId]=this.placeholders[placeholderId]||{};googletag.cmd.push(function(){var log='define slot for '+formatId+' on '+placeholderId+' (';sizes.forEach(function(size){log+=(Array.isArray(size)?size.join('x')+', ':size+', ');},this);log=log.slice(0,-2)+')';this.log(log);this.placeholders[placeholderId].slot=googletag.defineSlot(adUnitPath+'/'+formatId,sizes,placeholderId).addService(googletag.pubads());this.addKeyword('last_adunit',formatId,placeholderId);}.bind(this));return this.placeholders[placeholderId];},getPlaceholder:function(placeholderId){return this.placeholders[placeholderId];},getFormatId:function(placeholderId){return this.getPlaceholder(placeholderId).formatId;},getSlot:function(placeholderId){return this.getPlaceholder(placeholderId).slot;},getSlots:function(){return googletag.pubads();},getFormatsPlaceholders:function(formatIds){var placeholders={};formatIds.split(',').forEach(function(formatId){for(var placeholderId in this.placeholders){if(formatId===this.getFormatId(placeholderId)){placeholders[placeholderId]=this.getPlaceholder(placeholderId);}}},this);return placeholders;},onecallRetries:0,onecall:function(){if(this.onecallDone){return;}
if(this.onecallRetries>MAX_RETRIES){this.logError('Onecall max retries reached');return;}
googletag.cmd.push(function(){if(!googletag.pubadsReady){setTimeout(this.onecall.bind(this),50);this.onecallRetries++;return;}
this.onecallDone=true;this.log('onecall');this.call(this.placeholders,sas_formatIds);}.bind(this));},call:function(placeholders,formatIds){googletag.cmd.push(function(){this.log('call '+formatIds);this.preAdServerCall(formatIds,placeholders);this.updateTargeting(sas_target);var slots=Object.keys(placeholders).map(function(placeholderId){return placeholders[placeholderId].slot;}.bind(this));googletag.pubads().refresh(slots);this.postAdServerCall(formatIds);}.bind(this));},onLoad:function(){this.log('window onload');this.load();this.onecall();},render:function(formatId,params){var realFormatId=this.getRealFormatId(formatId);if(!realFormatId||this.isHiddenFormat(formatId)){return false;}
var placeholder=this.super.render.call(this,realFormatId,params);if(!placeholder){this.logError('Error creating placeholder');return false;}
var parsedSizes=this.getParsedSizes(params.sizes,realFormatId);var slot=this.defineSlot(realFormatId,parsedSizes,placeholder.id);return slot;},refreshAds:function(params){if(this.adblock){return false;}
params=params||{};if(params.formatIds){params.formatIds=this.getRealFormatIds(params.formatIds);}
var refresh=this.super.refreshAds.call(this,params);if(!refresh){return false;}
var placeholders={};if(params.tagId){placeholders[params.tagId]=this.getPlaceholder(params.tagId);}else{placeholders=this.getFormatsPlaceholders(params.formatIds);}
if(params.formatIds==='300_atf'){this.publish('ad.cleanSkin');}
setTimeout(function(){this.call(placeholders,params.formatIds);}.bind(this),50);return true;},clean:function(formatIds){this.log('clean '+(formatIds||'all'));if(formatIds){var placeholders=this.getFormatsPlaceholders(formatIds.toString());var slots=Object.keys(placeholders).map(function(placeholderId){return placeholders[placeholderId].slot;}.bind(this));googletag.destroySlots(slots);}else{googletag.destroySlots();}},findSize:function(sizeToFind,formatId){var found=false;var sizes=this.getSizes(formatId);if(sizes){sizes.forEach(function(size){if(sizeToFind===size){found=true;}},this);}
return found;},getSizes:function(formatId){if(!this.options.adUnitSizes){this.logError('Ad tech sizes are not defined');return false;}
try{return JSON.parse(this.options.adUnitSizes)[formatId].split(',');}catch(e){this.logError('Ad tech sizes can\'t be parsed for formatId '+formatId);return false;}},getParsedSizes:function(sizes,formatId){sizes=sizes||this.getSizes(formatId);return this.parseSizes(sizes);},parseSizes:function(sizes){var parsedSizes=[];if(sizes){sizes.forEach(function(size){if(size.indexOf('x')!==-1){parsedSizes.push(size.split('x').map(function(s){return parseInt(s);}));}else{parsedSizes.push(size);}},this);}
return parsedSizes;},addKeyword:function(key,value,placeholderId){googletag.cmd.push(function(){if(!placeholderId){this.super.addKeyword.call(this,key,value);}
if((key==='utm_source'||key==='utm_medium'||key==='utm_campaign')&&!value){return;}
var slots=placeholderId?this.getSlot(placeholderId):this.getSlots();if(!slots){this.logError('[addKeyword] Slots not defined: '+placeholderId);return;}
slots.setTargeting(key,value);}.bind(this));},removeKeywords:function(key,placeholderId){googletag.cmd.push(function(){if(!placeholderId){this.super.removeKeywords.call(this,key);}
var slots=placeholderId?this.getSlot(placeholderId):this.getSlots();if(!slots){this.logError('[removeKeywords] Slots not defined: '+placeholderId);return;}
slots.clearTargeting(key);}.bind(this));},updateKeyword:function(key,value,placeholderId){this.removeKeywords(key,placeholderId);this.addKeyword(key,value,placeholderId);},getFormattedKeywords:function(keywords){var formattedKeywords=[];var cleanedKeywords=this.removeMultipleKeys(keywords);cleanedKeywords.split(';').forEach(function(keyValue){formattedKeywords.push(keyValue.split('='));},this);return formattedKeywords;},getTargeting:function(placeholderId){var targeting='';var slots=placeholderId?this.getSlot(placeholderId):this.getSlots();if(slots){slots.getTargetingKeys().forEach(function(key){targeting+=key+'='+slots.getTargeting(key)+';';},this);}
return targeting;},setTargeting:function(targetString,placeholderId){var formattedKeywords=this.getFormattedKeywords(targetString);formattedKeywords.forEach(function(keyword){this.addKeyword(keyword[0],keyword[1],placeholderId);},this);},updateTargeting:function(targetString,placeholderId){var formattedKeywords=this.getFormattedKeywords(targetString);formattedKeywords.forEach(function(keyword){var key=keyword[0];var value=keyword[1];if(key==='utm_campaign'){var campaignCleaned=value.toLowerCase();if(campaignCleaned.indexOf('fcbk')===0||campaignCleaned.indexOf('facebook')===0){this.updateKeyword('_fcbk',value,placeholderId);}else if(campaignCleaned.indexOf('outb')===0){this.updateKeyword('_outb',value,placeholderId);}else if(campaignCleaned.indexOf('tabo')===0){this.updateKeyword('_tabo',value,placeholderId);}else if(campaignCleaned.indexOf('pint')===0){this.updateKeyword('_pint',value,placeholderId);}}
this.updateKeyword(key,value,placeholderId);},this);},removeMultipleKeys:function(keywords){var formattedKeywords='';var cleanedKeywords=keywords.replace(/^\W/,'').replace(/&+/g,'&');cleanedKeywords.split(';').forEach(function(keyValue){var keyValueArr=keyValue.split('=');var key=keyValueArr[0];var value=keyValueArr[1];if(!key||typeof value==='undefined'){return;}
var keyQS=';'+key+'=';var keyQSPos=formattedKeywords.indexOf(keyQS);if(keyQSPos!==-1){var keyValues=formattedKeywords.substr(keyQSPos+keyQS.length);if(keyValues.indexOf(';')!==-1){keyValues=keyValues.substr(0,keyValues.indexOf(';'));}
if(keyValues.indexOf(value)!==-1){return;}
formattedKeywords=formattedKeywords.substr(0,keyQSPos+keyQS.length)+value+','+formattedKeywords.substr(keyQSPos+keyQS.length);}else{formattedKeywords+=keyQS+value;}});if(formattedKeywords.indexOf(';')===0){formattedKeywords=formattedKeywords.substr(1);}
return formattedKeywords;},debug:function(){console.group('debug ads');console.group('placeholders');console.group('global');console.table({target:this.getTargeting()});console.groupEnd();var availablePlaceholders=[];var renderedPlaceholders=[];for(var placeholderId in this.placeholders){var slot=this.getSlot(placeholderId);var slotResponseInformation=slot.getResponseInformation();var placeholderInfos={formatId:this.getFormatId(placeholderId),adUnitPath:slot?slot.getAdUnitPath():'',placeholderId:placeholderId,target:this.getTargeting(placeholderId),advertiserId:slotResponseInformation?slotResponseInformation.advertiserId:null,campaignId:slotResponseInformation?slotResponseInformation.campaignId:null,creativeId:slotResponseInformation?slotResponseInformation.creativeId:null,lineItemId:slotResponseInformation?slotResponseInformation.lineItemId:null};availablePlaceholders.push(placeholderInfos);if(slot&&slot.getHtml()){renderedPlaceholders.push(placeholderInfos);}}
console.group('available ('+availablePlaceholders.length+')');console.table(availablePlaceholders);console.groupEnd();console.group('rendered ('+renderedPlaceholders.length+')');console.table(renderedPlaceholders);console.groupEnd();console.groupEnd();console.groupEnd();}});})();
var AufAds=window.AufAds||{};AufAds.SmartAdserver=(function(){var PLACEHOLDER_PREFIX='sas_';var WRAPPER_PREFIX='sas_FormatID_';return extend(AufAds.AufAdserver,{smartLoaded:false,scriptObjs:{},exclusions:[[300,[12,117,118]]],disabledFormats:{},renderedFormats:[],multipleformats:{f4040:3,f3206:4,f8120:4,f3243:8,f14140:4,f21150:6,f27316:10},constructor:function(params){params=params||{};params.name='smart';params.placeholderPrefix=PLACEHOLDER_PREFIX;params.wrapperPrefix=WRAPPER_PREFIX;window.sas=window.sas||{};window.sas.cmd=window.sas.cmd||[];window.sas_target=window.sas_target||'';this.super.constructor.call(this,params);sas.cmd.push(function(){sas.setup({networkid:(params.networkId||sas_networkId),domain:(params.domain?(params.domain.indexOf('//')<0?'//'+params.domain:params.domain):sas_domain),async:true,renderMode:sas.renderMode.ON_DEMAND});});af_addEvent(window,'load',this.renderAll.bind(this));this.onecall();if(window.sas_contentType){this.addKeyword('contenttype',window.sas_contentType);}},initListeners:function(){this.super.initListeners.call(this);this.subscribe('ad.error',this.onAdEvent.bind(this));this.subscribe('ad.noad',this.onAdEvent.bind(this));this.subscribe('ad.render',this.onAdEvent.bind(this));this.subscribe('ad.prerender',function(msg,data){this.log('ad prerender '+data.formatId);}.bind(this));},onAdEvent:function(event,data){if(!data||!data.formatIds){return;}
this.callVisibleTimeout(data.formatIds);},onError:function(errorMsg,data){this.logError(errorMsg);this.callVisibleTimeout(data.formatIds);},refreshAds:function(params){if(this.adblock||!(window.sas&&sas.call)){return false;}
params=params||{};var refresh=this.super.refreshAds.call(this,params);if(!refresh){this.clearMaxTimeout(params.formatIds);return false;}
if(params.tagId){var adplaceholder=document.getElementById(params.tagId);if(!adplaceholder){this.clearMaxTimeout(params.formatIds);this.logError('Trying to refresh ads with no placeholder: '+params.tagId);return false;}}
if(params.formatIds==='12'){this.clean('117');}
var refreshAllFormats=(params.formatIds===sas_formatIds);var forceMasterFlag=(typeof params.forceMasterFlag!=='undefined'?params.forceMasterFlag:refreshAllFormats);var resetTimestamp=(typeof params.resetTimestamp!=='undefined'?params.resetTimestamp:refreshAllFormats);var callParams={forceMasterFlag:forceMasterFlag,formatIds:params.formatIds,pageId:params.pageId,refresh:true,resetTimestamp:resetTimestamp,tagId:params.tagId};if(params.isFirstCall){this.call(callParams);}else{setTimeout(function(){this.call(callParams);}.bind(this),50);}
return true;},load:function(){if(this.smartLoaded){return;}
this.log('load');this.smartLoaded=true;sas_target=this.cleanKeywords(sas_target);var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src=sas_domain+'/config.js?nwid='+sas_networkId;var elt=document.getElementsByTagName('script')[0];elt.parentNode.insertBefore(s,elt);},render:function(formatId,placeholderId,params){this.log('render '+formatId);if(!formatId){this.logError('Trying to render format without formatId');}
var placeholder=this.super.render.call(this,formatId,placeholderId,params);if(!params){if(typeof placeholderId==='object'){params=placeholderId;}else{params={};}}
if(!placeholder){if(params.autoCreate){this.logError('Error creating placeholder');}}
if(!params||!params.refreshParams||params.refreshParams.mode!=='instant'){var formatIdInstance=(placeholder?placeholder.formatIdInstance:formatId);sas.cmd.push(function(){sas.render(formatIdInstance);});this.renderedFormats.push(formatIdInstance);}
return placeholder;},renderAll:function(){this.log('render all');this.load();sas.cmd.push(function(){sas.render();this.publish('ad.renderAll');}.bind(this));},call:function(o){o=o||{};if(!isNaN(o.formatIds)){this.stdcall(o);}else{this.onecall(o);}},stdcall:function(o){o=o||{};o.type='std';var that=this;sas.cmd.push(function(){o.callbacks={beforeRender:function(){if(!o.tagId){that.clean(o.formatIds);}}};that.sascall(o);});},onecall:function(o){o=o||{};o.type='onecall';o.forceMasterFlag=true;o.resetTimestamp=true;var initialFormatIds=o.formatIds||sas_formatIds;sas_unrenderedFormats=initialFormatIds.split(',');var that=this;sas.cmd.push(function(){o.formatIds=o.formatIds||sas_formatIds;that.askedFormats=o.formatIds.split(',');o.callbacks={beforeRender:function(){that.initOnecall(sas_manager);}};that.sascall(o);});},initOnecall:function(sasmgr){if(!sasmgr||sasmgr.afad_init)return;this.log('init onecall');this.scriptObjs={};var r1=/^[<](script|iframe)(\s.*?)[>](.*)$/i,r2=/\s([a-z]+)=(?:"([^"]*)"|([a-z0-9_]+))/gi;var nbs=0;var ffid;for(ffid in sasmgr.formats){var scriptUrlFn;if(typeof sasmgr.formats[ffid].scriptURL!=='undefined'){scriptUrlFn=sasmgr.formats[ffid].scriptURL;}else{scriptUrlFn=function(){return'<scr'+'ipt type="text/javascr'+'ipt" src="'+sasmgr.formats[ffid].scriptSrc()+'"></scr'+'ipt>';};}
var _s=scriptUrlFn();var t=r1.exec(_s);var o={_script:_s,type:t[1].toLowerCase(),attrs:{},trail:t[3]};eval(t[2].replace(r2,'o.attrs.$1="$2$3";'));this.scriptObjs[ffid]=o;nbs++;}
this.scriptObjs.length=nbs;for(ffid in sasmgr.formats){if(this.matchExclu(ffid)){this.matchExclu(ffid,true);break;}}
this.exclusions.forEach(function(exclusion){var formatId=exclusion[0];var excludedFormatIds=exclusion[1];if(this.exists(formatId)){excludedFormatIds.forEach(function(excludedFormatId){this.disable(excludedFormatId,'ex',formatId);},this);}},this);var cssToHide=[];this.askedFormats.forEach(function(formatId){if(!this.exists(formatId)){cssToHide.push('.sas_FormatID_'+formatId);}
for(var i=2,n=this.multipleformats['f'+formatId]||0;i<=n;i++){if(!this.exists(formatId+'_'+i)){cssToHide.push('.sas_FormatID_'+formatId+'_'+i);}}},this);if(cssToHide.length>0){this.setCss(cssToHide.join(',')+' { display:none; }');}
this.clean();sasmgr.afad_init=true;},sascall:function(o){if(!o){this.logError('Invalid ad call');return;}
if(o.type!=='onecall'&&o.type!=='std'){this.logError('Invalid ad call type');return;}
this.log(o.type+' '+o.formatIds);this.preAdServerCall(o.formatIds);var that=this;sas.call(o.type,{siteId:(o.siteId||sas_siteId),pageId:(o.pageId||sas_pageId),formatId:o.formatIds,formats:o.formats,target:sas_target,tagId:o.tagId},{async:true,forceMasterFlag:o.forceMasterFlag,resetTimestamp:true,beforeRender:function(format){if(o.callbacks&&o.callbacks.beforeRender){o.callbacks.beforeRender();}
that.publish('ad.render',{format:format,formatIds:o.formatIds});},onLoad:function(format){that.publish('ad.load',{format:format,formatIds:o.formatIds});},onNoad:function(format){that.log('onNoad - format '+format.formatId+' - tag '+format.tagId);that.publish('ad.noad',{format:format,formatIds:o.formatIds});},onError:function(){that.logError('smart onecall onError for '+o.formatIds);that.publish('ad.error',{formatIds:o.formatIds});}});this.postAdServerCall(o.formatIds);},clean:function(formatIds){this.log('clean '+(formatIds||'all'));if(formatIds){formatIds.toString().split(',').forEach(function(formatId){sas.clean(formatId);if(formatId==='300'||formatId==='117'){this.publish('ad.clean.skin');}},this);}else{sas.clean();this.publish('ad.clean');this.publish('ad.clean.skin');this.publish('ad.clean.navitem');}},matchExclu:function(formatId,apply){var formatIds,j,l;if(typeof(formatId)==='string')formatId=parseInt(formatId.replace(/f/i,''));if(!this.exists(formatId))return false;for(var i=0,a=this.exclusions;i<a.length;i++){if(formatId===a[i][0]){for(formatIds=a[i][1],j=0;j<formatIds.length;j++){if(this.exists(formatIds[j])){if(apply){this.disable(formatIds[j],'pr',formatId);}else{return true;}}}}}
for(var k=0,b=this.exclusions;k<b.length;k++){if(this.exists(b[k][0])){for(formatIds=b[k][1],l=0;l<formatIds.length;l++){if(formatId===formatIds[l]){if(apply){this.disable(b[k][0],'pr',formatId);}else{return true;}}}}}
return false;},setCss:function(style){var css=document.getElementById('afAdExclusions');if(!css){css=document.createElement('style');css.type='text/css';css.id='afAdExclusions';document.body.appendChild(css);}
if(css.styleSheet){css.styleSheet.cssText=style;}else{css.innerHTML=style;}},exists:function(formatId){return(this.scriptObjs&&this.scriptObjs['f'+formatId]);},disable:function(formatId,m,exclufid){this.disabledFormats[formatId]=m;var ffid='f'+formatId;var newfid=ffid+'-disabled-'+m+(exclufid?'-('+exclufid+')':'');this.scriptObjs[newfid]=this.scriptObjs[ffid];delete this.scriptObjs[ffid];if(sas_manager.exists(formatId)){sas_manager.formats[newfid]=sas_manager.formats[ffid];delete sas_manager.formats[ffid];}},debug:function(isHtml){var debugMsg='';for(var ffid in this.scriptObjs){var scriptObj=this.scriptObjs[ffid];if(scriptObj&&scriptObj._script){debugMsg+='- <b>'+ffid+'</b> : ';if(isHtml){debugMsg+=scriptObj._script.replace(/\>/g,'&gt;').replace(/</g,'&lt;').replace(/src="(.*?target=)(.*?)"/i,'src="<u style="cursor:pointer;" onclick="window.open(\'$1$2\');">$1...</u>"')
+'<br>';}else{debugMsg+=scriptObj._script+'\n';}}}
return debugMsg;}});})();
var AufAds=window.AufAds||{};AufAds.Focus=(function(){var singleInstance,currentState,hidden='hidden',v='visible',h='hidden',evtMap={focus:v,focusin:v,pageshow:v,blur:h,focusout:h,pagehide:h};function init(){checkFocus();return{};}
function checkFocus(){if('onfocusin'in document){af_addEvent(document,'focusin',onchange,false);af_addEvent(document,'focusout',onchange,false);}else{af_addEvent(window,'pageshow',onchange,false);af_addEvent(window,'pagehide',onchange,false);af_addEvent(window,'focus',onchange,false);af_addEvent(window,'blur',onchange,false);}}
function onchange(evt){evt=evt||window.event;if(evt.type in evtMap){currentState=evtMap[evt.type];}else{currentState=this[hidden]?h:v;}
if(window.afAd){if(currentState===h){afAd.publish('ad.focus.hidden');}else{afAd.publish('ad.focus.visible');}}}
return{init:function(){if(!singleInstance){singleInstance=init();}
return singleInstance;}};})();
var AufAds=window.AufAds||{};AufAds.Refresh=(function(){var refresh=function(){this.hasRun=false;};refresh.prototype={constructor:refresh,init:function(formatId,placeholderId,params){params=params||{};if(!window.afAd){return;}
if(!formatId){this.logError('Unknown Format Id');return;}
var placeholder;if(params.isVisibilityTestOn!==false){if(!placeholderId){this.logError('Unknown Placeholder Id');return;}
placeholder=document.getElementById(placeholderId);if(!placeholder){this.logError('Unknown Placeholder');return;}}
if(!this.hasRun){this.hasRun=true;this.formatId=formatId;this.placeholder=placeholder;this.placeholderId=placeholderId;this.delay=(typeof params.delay!=='undefined')?params.delay:0;this.extraTarget=params.extraTarget||'';this.mode=params.mode||'auto';this.formatIdToHide=(typeof params.formatIdToHide!=='undefined')?params.formatIdToHide:0;this.isAdCleaned=false;this.capping=params.capping||10;this.cappingCount=0;this.hasFocus=true;this.isFocusTestOn=(typeof params.isFocusTestOn!=='undefined')?params.isFocusTestOn:true;this.isVisibilityTestOn=(typeof params.isVisibilityTestOn!=='undefined')?params.isVisibilityTestOn:true;if(this.mode==='instant'){this.initRefreshInstant();}else if(this.mode==='manual'){this.initRefreshManual(params);}else{this.initRefreshAuto(params);}}},log:function(message,logType){afAd.log(message,logType);},logError:function(message,consoleOnly){afAd.logError(message,'refresh',consoleOnly);},initRefreshInstant:function(){afAd.refreshAds({extraTarget:this.extraTarget,formatIds:this.formatId,isFirstCall:true,tagId:this.placeholderId});},initRefreshManual:function(params){this.manualEvent=params.manualEvent||'';if(this.manualEvent){this.log('init refresh manual on FormatId='+this.formatId+' ['+this.manualEvent+']');afAd.subscribe(this.manualEvent,this.refreshAds.bind(this));}else{this.logError('Manual mode without event');}},initRefreshAuto:function(params){this.refreshAdsInterval=20000;if(typeof params.refreshAdsInterval!=='undefined'){this.refreshAdsInterval=params.refreshAdsInterval;}
if(typeof params.refreshAdsTimeout!=='undefined'){this.refreshAdsInterval=params.refreshAdsTimeout;}
this.log('init refresh auto on FormatId='+this.formatId+' ['+(this.refreshAdsInterval/1000)+'s]');this.canRefreshAuto=true;this.initFocusTest();setInterval(function(){if(this.canRefreshAuto&&this.hasFocus){this.refreshAds();}else{this.log('refresh auto is stopped on FormatId='+this.formatId);}}.bind(this),this.refreshAdsInterval);afAd.subscribe('ad.refresh.start',this.startRefreshAuto.bind(this));afAd.subscribe('ad.refresh.stop',this.stopRefreshAuto.bind(this));},startRefreshAuto:function(){this.log('start refresh auto on FormatId='+this.formatId);this.canRefreshAuto=true;},stopRefreshAuto:function(){this.log('stop refresh auto on FormatId='+this.formatId);this.canRefreshAuto=false;},initFocusTest:function(){if(!this.isFocusTestOn){return;}
afAd.subscribe('ad.focus.visible',this.onFocusVisible.bind(this));afAd.subscribe('ad.focus.hidden',this.onFocusHidden.bind(this));},onFocusVisible:function(){this.hasFocus=true;},onFocusHidden:function(){this.hasFocus=false;},isAdVisible:function(){if(!this.isVisibilityTestOn||this.canCleanAds()){return true;}
if(!this.placeholder){this.logError('Unknown Placeholder');return false;}
var windowSize=af_windowSize();var adPos=af_findPos(this.placeholder);return this.isAdSticky()||(windowSize.b>(adPos.t+(adPos.h/2))&&windowSize.b<(adPos.b+windowSize.h-(adPos.h/2)));},isAdSticky:function(){return this.placeholder.style.position==='fixed'||(this.placeholder.parentNode&&(this.placeholder.parentNode.style.position==='fixed'||(this.placeholder.parentNode.parentNode&&this.placeholder.parentNode.parentNode.style.position==='fixed')));},canCleanAds:function(){return this.formatIdToHide&&afAd.isSmart()&&!this.isAdCleaned;},canRefreshAds:function(){if(this.cappingCount>=this.capping){this.log('refresh blocked due to capping for FormatId='+this.formatId);return false;}
if(!this.isAdVisible()){this.log('refresh blocked due to visibility for FormatId='+this.formatId);return false;}
if(this.hasMrtnStepByStep()){this.log('refresh blocked due to marmiton step by step for FormatId='+this.formatId);return false;}
return true;},refreshAds:function(){if(!afAd.hasRefreshEnabled()){af_gaqTrackEvent('AF_ads','BlockedInventory','FormatId='+this.formatId,null,true);this.log('blocked inventory on FormatId='+this.formatId);return;}
if(this.canRefreshAds()){if(this.canCleanAds()){afAd.clean(this.formatIdToHide);this.isAdCleaned=true;}
afAd.refreshAds({delay:this.delay,extraTarget:this.extraTarget,formatIds:this.formatId});this.cappingCount++;if(this.formatIdToHide&&this.placeholder&&!this.placeholder.style.display){this.placeholder.style.display='block';}}},hasMrtnStepByStep:function(){return typeof(MrtnStepByStep)!=='undefined'&&MrtnStepByStep.opened;}};return refresh;})();
var AufAds=window.AufAds||{};AufAds.AufSkin=(function(){var BASE_CONF={position:'absolute',duration:0,clickTarget:'_blank',contentWidth:1020,contentWidthDefault:1020,contentVerticalOffset:280,contentVerticalOffsetMobile:100,creativeHTML:'',creativeURL:'',creativeWidth:1660,creativeHeight:1500,isHTML5:false};var skin=function(){};skin.prototype={hasStaticHeight:false,initialized:false,w:window,d:top.document,init:function(){if(!window.afAd){return;}
this.initialized=true;this.header=this.d.getElementById('header')||this.d.body.firstChild;this.topBox=this.d.getElementById('precontent');if(this.topBox){this.hasStaticHeight=true;}
this.createContainer();this.initEventListeners();},log:function(message,logType){afAd.log(message,logType);},logError:function(message,consoleOnly){afAd.logError(message,'skin',consoleOnly);},initEventListeners:function(){afAd.subscribe('ad.clean.skin',function(){this.close();}.bind(this));afAd.subscribe('ad.cleanSkin',function(){this.close();}.bind(this));},render:function(conf){if(!this.initialized){this.init();}
this.close();this.conf=BASE_CONF;if(conf){if(this.hasStaticHeight){conf.contentVerticalOffset=(af_userAgent.isMobile()?this.conf.contentVerticalOffsetMobile:this.conf.contentVerticalOffset);}
for(var attr in conf){this.conf[attr]=conf[attr];}}
if(!this.conf.creativeHTML&&!this.conf.creativeURL){this.logError('No creative URL or HTML');return;}
this.isHTML5=(this.conf.creativeHTML!=='')||(this.conf.creativeURL&&this.conf.creativeURL.substr(this.conf.creativeURL.length-5)==='.html')||this.conf.isHTML5;this.showContainer();this.addHtml();this.addCreatives();this.resize();this.setTimer();this.skinCallback();this.open=true;return this.creative;},createContainer:function(){this.container=this.d.createElement('div');this.container.className='auf-skin';if(af_userAgent.isMobile()||af_userAgent.isTablet()){this.container.style.overflow='hidden';}
this.header.parentNode.insertBefore(this.container,this.header.nextSibling);},showContainer:function(){this.container.style.display='';if((!af_userAgent.isMobile()&&!af_userAgent.isTablet())||this.hasStaticHeight){this.container.style.height=this.conf.contentVerticalOffset+'px';}
if(this.topBox){this.topBox.style.display='none';}},close:function(){if(!this.open){return;}
if(this.timer){this.w.clearTimeout(this.timer);}
this.container.innerHTML='';this.container.style.display='none';if(this.topBox){this.topBox.style.display='';}
this.d.body.style.background='';this.open=false;},addHtml:function(){if(!this.conf.htmlUrl||!this.conf.htmlWidth||!this.conf.htmlHeight)return;var html=this.d.createElement('iframe');html.setAttribute('scrolling','no');html.setAttribute('frameborder',0);html.setAttribute('width',this.conf.htmlWidth);html.setAttribute('height',this.conf.htmlHeight);html.setAttribute('src',this.conf.htmlUrl);html.style.zIndex=1;html.style.position='relative';html.style.left=this.conf.htmlHorizontalOffset+'px';html.style.top=this.conf.htmlVerticalOffset+'px';var htmlDiv=this.d.createElement('div');htmlDiv.className='skin-html';htmlDiv.style.height=this.conf.contentVerticalOffset+'px';htmlDiv.style.width=this.conf.contentWidth+'px';htmlDiv.appendChild(html);this.container.appendChild(htmlDiv);},addCreatives:function(){if(this.conf.creatives&&(this.conf.creatives.video_mp4||this.conf.creatives.video_webm)){this.creative=this.d.createElement('video');this.creative.className='skin-video';this.creative.loop=true;this.creative.autoplay=true;this.creative.muted=true;var videoSources='';if(this.conf.creatives.video_mp4){videoSources+='<source type="video/mp4" src="'+this.conf.creatives.video_mp4+'"></source>';}
if(this.conf.creatives.video_webm){videoSources+='<source type="video/webm" src="'+this.conf.creatives.video_webm+'"></source>';}
this.creative.innerHTML=videoSources;}else if(this.isHTML5){this.creative=this.d.createElement('iframe');this.creative.className='skin-iframe';this.creative.setAttribute('frameborder',0);this.creative.scrolling='no';this.creative.width=this.conf.creativeWidth+'px';this.creative.height=this.conf.creativeHeight+'px';this.creative.sandbox='allow-forms allow-pointer-lock allow-same-origin allow-popups allow-modals allow-scripts';if(this.conf.creativeHTML&&!this.conf.oldWayRendering){this.creative.src='data:text/html;charset=utf-8,'+encodeURI(this.conf.creativeHTML);}
if(this.conf.clickURL){this.conf.creativeURL+=(this.conf.creativeURL.indexOf('?')<0?'?':'&')+'clickurl='+this.conf.clickURL;}
if(this.conf.creativeURL){this.creative.src=this.conf.creativeURL;}}else if((af_userAgent.isMobile()||af_userAgent.isTablet())&&!this.hasStaticHeight){this.creative=this.d.createElement('img');this.creative.className='skin-img';this.creative.src=this.conf.creativeURL;}else{this.creative=this.d.createElement('div');this.creative.className='skin-div';this.creative.style.height=this.conf.creativeHeight+'px';if(this.conf.creativeURL){this.creative.style.backgroundImage='url(\''+this.conf.creativeURL+'\')';}
if(af_userAgent.isMobile()||af_userAgent.isTablet()){this.creative.style.backgroundSize='contain';}}
if(this.conf.clickURL&&!this.isHTML5){this.link=this.d.createElement('a');this.link.className='skin-link';this.link.href=this.conf.clickURL;this.link.target=this.conf.clickTarget;this.link.appendChild(this.creative);this.container.appendChild(this.link);}else{this.container.appendChild(this.creative);if(this.conf.oldWayRendering){this.creative.contentWindow.document.open();this.creative.contentWindow.document.write(this.conf.creativeHTML);this.creative.contentWindow.document.close();this.container.style.height='';}}
if(this.conf.color){this.d.body.style.background='#'+this.conf.color;}
if(this.conf.position==='fixed'){this.onScroll();af_addEvent(this.w.top,'scroll',(function(){this.onScroll();}).bind(this),false);}},onScroll:function(){var skinPos=af_findPos(this.container);var winPos=af_windowSize();if(skinPos.t<winPos.t&&this.linkPreviousState!=='fixed'){this.linkPreviousState='fixed';this.creative.style.position='fixed';var header=document.getElementsByTagName('header')[0];if(this.link&&header&&header.offsetHeight){this.link.style.top=header.offsetHeight+'px';}}else if(skinPos.t>winPos.t&&this.linkPreviousState!=='absolute'){this.linkPreviousState='absolute';this.creative.style.position='absolute';this.creative.style.top='0px';}},resize:function(){if(this.conf.contentWidth<this.conf.contentWidthDefault){var content=this.d.getElementById('content');if(content&&content.className.indexOf('habillage')<0)content.className+=' habillage';}},setTimer:function(){if(this.conf.duration){this.timer=setTimeout((function(){this.close();}).bind(this),this.conf.duration*1000);}},skinCallback:function(){if(this.conf.callback){this.conf.callback(this.creative);}}};return skin;})();
var AufAds=window.AufAds||{};AufAds.Logger=(function(){var KEY='ads';var LOGMATIC_KEYS={'ADS':'nj8bX2-ySgi_KgDzwP3Otw'};var logger=function(){this.initLogger();};logger.prototype={initLogger:function(){this.logger=window.afLogger;this.logger.logmaticInitKeys(LOGMATIC_KEYS);},setVerbose:function(enabled){this.logger.setVerbose(KEY,enabled);},logConsole:function(log,logType){this.logger.logConsole(log,logType,KEY);},logError:function(message,category,consoleOnly){this.logger.logError(message,KEY+(category?':'+category:''),consoleOnly);},logAnalytics:function(message,event,data){return;if(window.afSession&&!afSession.isPaid())return;this.logger.logAnalytics(message,{ads:data,event:event||''},false);},logEvent:function(event,data){this.logAnalytics('ADS',event,data);}};return logger;})();
