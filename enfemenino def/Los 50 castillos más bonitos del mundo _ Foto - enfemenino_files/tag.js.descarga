function agknTagBuilder(){var n,t="-1",e="-1",r="-1",i="-1",a="-1",o="-1",c="-1",g="0",u="",s=1,d=1,h="iframe",f={},l=null,w=null,m=0,p=this,T=function(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},v=function(g){var u="{";u+=k("bpid",t),u+=","+k("loc",l),w||(w="-1"),u+=","+k("ref",w),u+=","+k("cid",o),u+=","+k("sid",a),u+=","+k("gen",e),u+=","+k("age",r),u+=","+k("cat",i),u+=","+k("brd",c);for(var s in f){var d=k(s,f[s]);n(d).length+g+n(u).length<2e3&&(u+=","+d)}return u+="}"},k=function(n,t){return'"'+n+'":"'+t+'"'},y=function(){var t="http"+("https:"==window.location.protocol?"s":"")+"://",e="/"+h+"/8613/",r=t+"d.agkn.com"+e+"?che="+Math.floor(1e9*Math.random())+("1"===g?"&gdpr="+g+"&gdpr_consent="+u:"")+"&c=";return r+=n(v(r.length)),r.length>=2e3&&(r="%"==r.charAt(1998)?r.substr(0,1998):"%"==r.charAt(1999)?r.substr(0,1999):r.substr(0,2e3),"%"==r.charAt(r.length-3)&&"2"==r.charAt(r.length-2)&&"5"==r.charAt(r.length-1)&&(r=r.substr(0,r.length-3))),r},A=function(){var n,t,e=0,r=0;if(1==s)for(var i=window;;){try{n=i.document.location,t=i.document.referrer,e=r}catch(n){}if(i==window.top||i==i.parent)break;i=i.parent,r++}else n=window.document.location,t=window.document.referrer;m=r-e,w=t.toString(),l=0==m?n.href:w};if("function"==typeof encodeURIComponent)n=encodeURIComponent;else{var _=new RegExp('[\0- ]|["-&]|[+-,]|/|[:-@]|[[-^]|`|[{-}]|[-ï¿¿]',"g");n=function(n){return n.toString().replace(_,C)}}var b=function(n){var t=n.toString(16).toUpperCase();return t.length<2?"0"+t:t},C=function(n){var t=n.charCodeAt(0);return isNaN(t)?"":t<128?"%"+b(t):t<2048?"%"+b(192+(t>>6))+"%"+b(128+(63&t)):t<65536?"%"+b(224+(t>>12))+"%"+b(128+(t>>6&63))+"%"+b(128+(63&t)):"%"+b(240+(t>>18))+"%"+b(128+(t>>12&63))+"%"+b(128+(t>>6&63))+"%"+b(128+(63&t))},B=function(n,t,e){var r=window.document.createElement("iframe");return r.height=t||0,r.width=e||0,r.frameBorder=0,r.src=n,r.style.display="none",r},N=function(n){var t=window.document.createElement("img");return t.height=0,t.width=0,t.src=n,t.style.display="none",t},S=function(n){var t=null==window.document.body?window.document.getElementsByTagName("head")[0]:window.document.body;t.insertBefore(n,t.lastChild)};this.addEchoKeyValue=function(n,t){f[T(n)]=T(t)},this.setBpId=function(n){t=T(n)},this.setGen=function(n){e=T(n)},this.setAge=function(n){r=T(n)},this.setCat=function(n){i=T(n)},this.setSid=function(n){a=T(n)},this.setCid=function(n){o=T(n)},this.setBrd=function(n){c=T(n)},this.setGdpr=function(n){g=n},this.setGdprConsent=function(n){u=n},this.setFindParentFrame=function(n){s=n},this.setForceRetag=function(n){d=n},this.setTrimAnchor=function(n){n=n},this.generateTag=function(n){h="img"==n?"pixel":"iframe";var t;if(A(),!window._isAgknTagSet||1==d){if("function"==typeof setUpAgknTag)try{setUpAgknTag(p)}catch(n){}var e=y();t="img"==n?N(e):B(e,0,0),window._isAgknTagSet=1,S(t)}return t}}var _agknTag=new agknTagBuilder,_agknTagName="_agknEchoTag";window[_agknTagName]=_agknTag,window[_agknTagName]?window[_agknTagName].generateTag():generateTag();