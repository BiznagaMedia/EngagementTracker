!function(){"use strict";function e(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent?e.attachEvent("on"+t,function(t){t.target=t.target||t.srcElement,a.call(e,t)}):("undefined"==typeof e["on"+t]||null===e["on"+t])&&(e["on"+t]=function(t){t.target=t.target||t.srcElement,a.call(e,t)})}function t(e){for(var t=0;t<s.length;t++)if(-1!=e.search(s[t]))return s[t];return null}function a(e,t){return function(){if(void 0!=e)switch(t){case void 0:window.location=e;break;default:window.open(e,"_blank")}}}function r(e){var r=e.currentTarget,n=r.getAttribute("href"),i=t(n);if(void 0==n);else if(null==i){var o=r.getAttribute("target"),c={ref:n};if("_blank"==o||e.ctrlKey)mixpanel.track("Click Out",c,!1);else{e.preventDefault();var l=a(n);mixpanel.track("Click Out",c,l),window.setTimeout(l,500)}}else{switch(i){case"google":var d="Google+";break;case"mailto":var d="Email";break;case"mail.google":var d="Gmail";break;case"bufferapp":var d="Buffer";break;default:var d=i.charAt(0).toUpperCase()+i.slice(1)}var c={Red:d};mixpanel.track("Share Redes Sociales",c,!1)}}function n(e){var t="";if(e.nodeType===Node.TEXT_NODE&&""!=e.nodeValue.trim())return e.nodeValue.trim();for(var a=0;a<e.childNodes.length;a++)t+=n(e.childNodes[a]);return t}function i(e){var t=Object.assign({},m),a=e-t.date;if(m.text<t.characterLimit)var r=100*t.text/t.characterLimit,n=6e4*r/100;else if(m.text==t.characterLimit)var n=6e4;else var n=t.text/t.characterLimit*6e4;var i=n*f/100;return a>=Math.floor(i)?!0:!1}function o(e){var t=document.getElementsByClassName("article-text");m.articleInit=t[0].offsetTop,m.end=t[0].clientHeight,m.articleEnd=t[0].offsetTop+t[0].clientHeight;var a=window.scrollY,r=Date.now();if(!i(r))return void window.setTimeout(o,2e3,e);var n=window.innerHeight;if(m.articleEnd<n&&0==a&&!v)return v=!0,void mixpanel.track("Lecturas",null,!1);var c=m.articleEnd-m.articleInit,l=c*g/100;return a>m.articleInit+l&&!v?(v=!0,void mixpanel.track("Lecturas",null,!1)):void window.setTimeout(o,2e3,e)}function c(e){if(e.getPlayerState()==YT.PlayerState.PLAYING){var t=e.getDuration()-e.getCurrentTime()<=1.5?1:(Math.floor(e.getCurrentTime()/e.getDuration()*4)/4).toFixed(2);e.lastP=t}1!=e.lastP&&window.setTimeout(c,2e3,e)}function l(e){e.data==YT.PlayerState.PLAYING&&window.setTimeout(c,1e3,e.target);var t=e.target.getVideoData(),a=window.location.href,r=t.title+" : "+t.video_id;if(e.data==YT.PlayerState.PLAYING&&"p"==YT.gtmLastAction){YT.gtmLastAction="";for(var n=null,i=0;i<p.length;i++){e.target.getIframe().getAttribute("src");if(p[i].id==e.target.getIframe().getAttribute("src")){n=p[i].eventSend;break}}if(!n){p[i].eventSend=!n;var o={Ubicacion:a,"Nombre del Video":r};mixpanel.track("Visualizacion Video",o,!1)}}e.data==YT.PlayerState.PAUSED&&(YT.gtmLastAction="p")}function d(){for(var e=document.getElementsByTagName("embed"),t=e.length;t--;)/youtube.com/.test(e[t].src)&&(e[t].parentNode.outerHTML=e[t].outerHTML.replace(/embed/g,"iframe").replace(/youtube\.com\/v/g,"youtube.com/embed"));for(var e=document.getElementsByTagName("iframe"),t=e.length;t--;)/youtube.com\/embed/.test(e[t].src)&&-1===e[t].src.indexOf("enablejsapi=")&&(e[t].src+=(-1===e[t].src.indexOf("?")?"?":"&")+"enablejsapi=1")}function u(){for(var t=document.getElementsByTagName("a"),a=0;a<t.length;a++)e(t[a],"click",r);var i=document.getElementsByClassName("article-text");i[0]&&(m.text=n(i[0]).length,m.articleInit=i[0].offsetTop,m.end=i[0].clientHeight,m.articleEnd=i[0].offsetTop+i[0].clientHeight,m.date=Date.now(),window.setTimeout(o,1e3,i[0])),d()}mixpanel.track("Page View");var s=["facebook","twitter","google","whatsapp","pinterest","mailto","reddit","linkedin","tumblr","mail.google","printfriendly","telegram","skype","viber","bufferapp","flipboard"],m={characterLimit:2e3},f=10,g=15,v=!1,p=[];window.onYouTubeIframeAPIReady=function(){for(var e=document.getElementsByTagName("iframe"),t=e.length;t--;)/youtube.com\/embed/.test(e[t].src)&&(p.push({id:e[t].src,eventSend:!1,event:new YT.Player(e[t],{events:{onStateChange:l}})}),YT.gtmLastAction="p")};var b=document.createElement("script"),w=document.getElementsByTagName("script")[0];b.src="//www.youtube.com/iframe_api",b.async=!0,w.parentNode.insertBefore(b,w);var h=document.addEventListener?"DOMContentLoaded":"load";e(document,h,u)}();
